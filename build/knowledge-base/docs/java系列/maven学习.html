<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>本文内容 · 影子的知识库</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## 设置 MAVEN_OPTS 环境变量"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="本文内容 · 影子的知识库"/><meta property="og:type" content="website"/><meta property="og:url" content="https://www.lovepp.org/"/><meta property="og:description" content="## 设置 MAVEN_OPTS 环境变量"/><meta property="og:image" content="https://www.lovepp.org/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://www.lovepp.org/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/default.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-153148512-1', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="/js/buttons.js"></script><script type="text/javascript" src="/js/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100,"scrollDuration":400}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/mark-github.svg" alt="影子的知识库"/><h2 class="headerTitleWithLogo">影子的知识库</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/JVM系列/JVM内存区域" target="_self">知识库</a></li><li class=""><a href="https://github.com/cenzhipeng/knowledge-base" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Java系列</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">JVM系列<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/JVM系列/JVM内存区域">JVM内存区域</a></li><li class="navListItem"><a class="navItem" href="/docs/JVM系列/对象创建-布局-访问">对象创建-布局-访问</a></li><li class="navListItem"><a class="navItem" href="/docs/JVM系列/内存溢出实战">内存溢出实战</a></li><li class="navListItem"><a class="navItem" href="/docs/JVM系列/内存区域回收">内存区域回收</a></li><li class="navListItem"><a class="navItem" href="/docs/JVM系列/四大引用">四大引用</a></li><li class="navListItem"><a class="navItem" href="/docs/JVM系列/垃圾回收算法">垃圾回收算法</a></li><li class="navListItem"><a class="navItem" href="/docs/JVM系列/HotSpot回收算法细节">HotSpot回收算法细节</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Java系列<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/java系列/java注解">java注解</a></li><li class="navListItem"><a class="navItem" href="/docs/java系列/springboot请求参数绑定">springboot请求参数绑定</a></li><li class="navListItem"><a class="navItem" href="/docs/java系列/springboot请求参数校验框架">springboot请求参数校验框架</a></li><li class="navListItem"><a class="navItem" href="/docs/java系列/YAML语法">YAML语法</a></li><li class="navListItem"><a class="navItem" href="/docs/java系列/动态代理">动态代理</a></li><li class="navListItem"><a class="navItem" href="/docs/java系列/classpath和java命令">classpath和java命令</a></li><li class="navListItem"><a class="navItem" href="/docs/java系列/springboot-aop编程">springboot-aop编程</a></li><li class="navListItem"><a class="navItem" href="/docs/java系列/springboot统一异常处理">springboot统一异常处理</a></li><li class="navListItem"><a class="navItem" href="/docs/java系列/springboot数据库和事务">springboot数据库和事务</a></li><li class="navListItem"><a class="navItem" href="/docs/java系列/springboot拦截器">springboot拦截器</a></li><li class="navListItem"><a class="navItem" href="/docs/java系列/springboot中的web配置">springboot中的web配置</a></li><li class="navListItem"><a class="navItem" href="/docs/java系列/docker的简单开发">docker的简单开发</a></li><li class="navListItem"><a class="navItem" href="/docs/java系列/springboot自动配置">springboot自动配置</a></li><li class="navListItem"><a class="navItem" href="/docs/java系列/数据库的隔离级别">数据库的隔离级别</a></li><li class="navListItem"><a class="navItem" href="/docs/java系列/springboot监控">springboot监控</a></li><li class="navListItem"><a class="navItem" href="/docs/java系列/java类加载">java类加载</a></li><li class="navListItem"><a class="navItem" href="/docs/java系列/java-agent的相关内容">java-agent的相关内容</a></li><li class="navListItem"><a class="navItem" href="/docs/java系列/类加载器详解">类加载器详解</a></li><li class="navListItem"><a class="navItem" href="/docs/java系列/java的SecurityManager">java的SecurityManager</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/java系列/maven学习">maven学习</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Node<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">JS 基础</h4><ul><li class="navListItem"><a class="navItem" href="/docs/nodejs/语法基础和数据类型">语法基础和数据类型</a></li><li class="navListItem"><a class="navItem" href="/docs/nodejs/数据类型转换">数据类型转换</a></li><li class="navListItem"><a class="navItem" href="/docs/nodejs/语句-表达式-运算符">语句 表达式 运算符</a></li><li class="navListItem"><a class="navItem" href="/docs/nodejs/变量与对象">变量与对象</a></li><li class="navListItem"><a class="navItem" href="/docs/nodejs/函数">函数</a></li><li class="navListItem"><a class="navItem" href="/docs/nodejs/数据处理">数据处理</a></li><li class="navListItem"><a class="navItem" href="/docs/nodejs/常用API">常用 API</a></li><li class="navListItem"><a class="navItem" href="/docs/nodejs/重点知识">重点知识</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">ES6</h4><ul><li class="navListItem"><a class="navItem" href="/docs/nodejs/ES6/块级作用域">块级作用域</a></li><li class="navListItem"><a class="navItem" href="/docs/nodejs/ES6/字符串和正则表达式">字符串和正则表达式</a></li><li class="navListItem"><a class="navItem" href="/docs/nodejs/ES6/函数">函数</a></li><li class="navListItem"><a class="navItem" href="/docs/nodejs/ES6/对象">对象</a></li><li class="navListItem"><a class="navItem" href="/docs/nodejs/ES6/Symbol">Symbol</a></li><li class="navListItem"><a class="navItem" href="/docs/nodejs/ES6/Set和Map">Set和Map</a></li><li class="navListItem"><a class="navItem" href="/docs/nodejs/ES6/迭代器和生成器">迭代器和生成器</a></li><li class="navListItem"><a class="navItem" href="/docs/nodejs/ES6/类">类</a></li><li class="navListItem"><a class="navItem" href="/docs/nodejs/ES6/数组">数组</a></li><li class="navListItem"><a class="navItem" href="/docs/nodejs/ES6/Promise">Promise</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Node 基础</h4><ul><li class="navListItem"><a class="navItem" href="/docs/nodejs/node基础/模块系统">模块系统</a></li><li class="navListItem"><a class="navItem" href="/docs/nodejs/node基础/package.json">package.json</a></li><li class="navListItem"><a class="navItem" href="/docs/nodejs/node基础/内置对象">内置对象</a></li><li class="navListItem"><a class="navItem" href="/docs/nodejs/node基础/npm脚本的使用">npm脚本的使用</a></li><li class="navListItem"><a class="navItem" href="/docs/nodejs/node基础/Buffer">Buffer</a></li><li class="navListItem"><a class="navItem" href="/docs/nodejs/node基础/Stream">Stream</a></li><li class="navListItem"><a class="navItem" href="/docs/nodejs/node基础/事件循环机制">事件循环机制</a></li><li class="navListItem"><a class="navItem" href="/docs/nodejs/node基础/示例代码">示例代码</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">stream系列</h4><ul><li class="navListItem"><a class="navItem" href="/docs/nodejs/node基础/stream系列/流的缓冲">流的缓冲</a></li><li class="navListItem"><a class="navItem" href="/docs/nodejs/node基础/stream系列/可读流">可读流</a></li><li class="navListItem"><a class="navItem" href="/docs/nodejs/node基础/stream系列/可写流">可写流</a></li><li class="navListItem"><a class="navItem" href="/docs/nodejs/node基础/stream系列/双工流和转换流">双工流和转换流</a></li><li class="navListItem"><a class="navItem" href="/docs/nodejs/node基础/stream系列/自定义流">自定义流</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">后期计划<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/后期计划/学习计划">学习计划</a></li><li class="navListItem"><a class="navItem" href="/docs/后期计划/专题研究计划">专题研究计划</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/cenzhipeng/knowledge-base/tree/master/docs/java系列/21.maven学习.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">本文内容</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="设置-maven_opts-环境变量"></a><a href="#设置-maven_opts-环境变量" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>设置 MAVEN_OPTS 环境变量</h2>
<p>例如设置为 -Xms128m -Xmx512m，就是为 maven 进程设置 JVM 参数</p>
<h2><a class="anchor" aria-hidden="true" id="配置仓库镜像"></a><a href="#配置仓库镜像" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>配置仓库镜像</h2>
<pre><code class="hljs css language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">settings</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">mirrors</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mirror</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>aliyun<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>aliyun<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">mirrorOf</span>&gt;</span>central<span class="hljs-tag">&lt;/<span class="hljs-name">mirrorOf</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- 国内推荐阿里云的Maven镜像 --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public/<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">mirror</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">mirrors</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="搜索第三方组件"></a><a href="#搜索第三方组件" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>搜索第三方组件</h2>
<p><a href="https://search.maven.org/">https://search.maven.org/</a></p>
<h2><a class="anchor" aria-hidden="true" id="生命周期"></a><a href="#生命周期" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>生命周期</h2>
<p>maven 有 3 套<strong>独立的</strong>生命周期，他们分别是 clean、default、site。</p>
<p>site 主要是发布项目站点，用的不多，就不讲了</p>
<p>主要说下 clean 和 default</p>
<h3><a class="anchor" aria-hidden="true" id="clean"></a><a href="#clean" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>clean</h3>
<p>clean 生命周期的目的是清理项目，它包括 3 个<strong>阶段</strong></p>
<ul>
<li>pre-clean：执行 clean 之前需要完成的工作</li>
<li>clean：执行 clean 阶段</li>
<li>post-clean：执行 clean 之后需要完成的工作</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="default"></a><a href="#default" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>default</h3>
<p>default 生命周期定义了构建项目时所需要的执行步骤，它是生命周期中最核心的部分，包含的阶段如下</p>
<ul>
<li>validate：验证项目结构是否正常，必要的配置文件是否存在</li>
<li>initialize：做构建前的初始化操作，比如初始化参数、创建必要的目录等</li>
<li>generate-sources：产生在编译过程中需要的源代码</li>
<li>process-sources：处理源代码，一般来说是对 src/main/resources 目录的内容进行变量替换等工作，复制输出到 classpath 目录里</li>
<li><strong>generate-resources</strong>：产生主代码中的资源在 classpath 里的包</li>
<li><strong>process-resources</strong>：将资源文件复制到 classpath 的对应包中</li>
<li><strong>compile</strong>：编译项目的主源码。一般是 src/main/java</li>
<li>process-classes：产生编译过程中生成的文件</li>
<li>generate-test-resources：产生编译过程中测试相关的代码</li>
<li>process-test-resources：处理测试代码，一般来说是对 src/test/resources 目录的内容进行变量替换等工作，复制输出到 classpath 目录里</li>
<li><strong>generate-test-resources</strong>：产生测试资源在 classpath 里的包</li>
<li><strong>process-test-resources</strong>：将测试资源复制到 classpath</li>
<li><strong>test-compile</strong>：编译测试代码</li>
<li>process-test-compile：产生编译测试代码过程中的文件</li>
<li><strong>test</strong>：运行测试用例</li>
<li>prepare-package：打包之前需要做的工作</li>
<li>package：打包</li>
<li>pre-integration-test：集成测试之前的工作</li>
<li>integration-test：集成测试</li>
<li>post-integration-test：集成测试之后的工作</li>
<li>verify：检测测试后的包是否完好</li>
<li><strong>install</strong>：将打包的组件以构件的形式，安装到本地依赖库中</li>
<li><strong>deploy</strong>：将最终的包以构件的形式发布到远程仓库</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="生命周期与阶段"></a><a href="#生命周期与阶段" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>生命周期与阶段</h3>
<p>一共有 3 套生命周期，每个生命周期包含多个阶段，生命周期之间是独立的，可以自主的决定他们的顺序。但是一个生命周期的阶段之间是有依赖的，顺序是固定的</p>
<p>例如</p>
<pre><code class="hljs">mvn clean <span class="hljs-keyword">package</span>
<span class="hljs-title"></span></code></pre>
<p>这个命令就执行了两个生命周期，先执行 clean 生命周期，再执行 default 生命周期，如果我们使用</p>
<pre><code class="hljs">mvn <span class="hljs-keyword">package</span> <span class="hljs-title">clean</span>
</code></pre>
<p>那么这个命令也执行两个生命周期，但是先执行 default 生命周期，再执行 clean 生命周期（当然一般不会这么写）</p>
<p>以上体现了生命周期的独立性，我们可以随意安排顺序（当然一般还是 clean default 的顺序）</p>
<p>而阶段的依赖性是指：阶段的顺序是固定的，例如</p>
<pre><code class="hljs">mvn clean <span class="hljs-keyword">package</span>
<span class="hljs-title"></span></code></pre>
<p>第一个 clean 表示我们执行 clean 的生命周期，并且执行到了 clean 阶段，因此 pre-clean 阶段也已经执行了</p>
<p>第二个 package 表示执行 default 生命周期，并且执行到了 package 阶段，因此从 validate、initialize... 一直到</p>
<p>prepare-package 都已经执行过了</p>
<h2><a class="anchor" aria-hidden="true" id="插件和目标"></a><a href="#插件和目标" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>插件和目标</h2>
<p>maven 只是定义了一套生命周期和阶段，但是自身其实是不做什么事情的，真正在这些生命周期和阶段中做事都是由插件来完成的。插件以独立的构建的形式存在，所以 maven 本身是很小的。</p>
<p>一个插件可能有很多个功能，比如 maven-dependency-plugin 它可以分析目标（analyze），它也可以列出依赖的目标（tree），这些一个一个的功能我们称作为目标（goal）。</p>
<p>现在 maven 已经定义了一套生命周期（default 生命周期）了，有20多个阶段，那么要将插件的功能集成到 maven 里，其实要做的也就是 goal 和 phase（阶段）的绑定了。</p>
<p>最终的效果就是：一个阶段可以绑定 A 插件的 a 目标，也可以继续绑定 B 插件的 b 目标，也就是说：</p>
<p><strong>一个阶段可以绑定多个目标（goal）</strong></p>
<p><img src="../assets/image-20200322224833499.png" alt="image-20200322224833499"></p>
<p>如图，compile 阶段绑定了 maven-compiler-plugin 插件的 compile 目标</p>
<h3><a class="anchor" aria-hidden="true" id="如何执行目标"></a><a href="#如何执行目标" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>如何执行目标</h3>
<p>使用 <code>mvn 插件前缀:目标名</code> 来执行目标，例如</p>
<pre><code class="hljs"><span class="hljs-keyword">mvn </span>dependency:analyze
</code></pre>
<p>就执行了 maven-dependency-plugin 的 analyze 目标</p>
<h3><a class="anchor" aria-hidden="true" id="内置绑定"></a><a href="#内置绑定" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>内置绑定</h3>
<p>显然如果所有的都要自己配的话，那 maven 就没什么卵用了，还不如用 gradle，因此 maven 提供了很多的内置阶段与插件目标的绑定，当我们在命令行里执行某个阶段的时候，就会自动执行这个阶段所绑定的插件的目标。</p>
<p>例如当我们执行 <code>mvn clean</code> 时，实际上内置绑定的是 maven-clean-plugin 的 clean 目标，相当于执行了 <code>mvn clean:clean</code></p>
<p>内置的绑定有</p>
<table>
<thead>
<tr><th style="text-align:center">生命周期阶段</th><th style="text-align:center">插件目标</th><th style="text-align:center">执行任务</th></tr>
</thead>
<tbody>
<tr><td style="text-align:center">process-resources</td><td style="text-align:center">maven-resources-plugin:resources</td><td style="text-align:center">复制主资源文件到主输出目录</td></tr>
<tr><td style="text-align:center">compile</td><td style="text-align:center">maven-compiler-plugin:compile</td><td style="text-align:center">编译主代码到主输出目录</td></tr>
<tr><td style="text-align:center">process-test-resources</td><td style="text-align:center">maven-resources-plugin:testResources</td><td style="text-align:center">复制测试资源到测试输出目录</td></tr>
<tr><td style="text-align:center">test-compile</td><td style="text-align:center">maven-compiler-plugin:testCompile</td><td style="text-align:center">编译测试代码到测试输出目录</td></tr>
<tr><td style="text-align:center">test</td><td style="text-align:center">maven-surefile-plugin:test</td><td style="text-align:center">执行测试用例</td></tr>
<tr><td style="text-align:center">package</td><td style="text-align:center">maven-jar-plugin:jar</td><td style="text-align:center">创建项目 jar 包</td></tr>
<tr><td style="text-align:center">install</td><td style="text-align:center">maven-instsll-plugin:install</td><td style="text-align:center">将项目输出构建安装到本地仓库</td></tr>
<tr><td style="text-align:center">deploy</td><td style="text-align:center">maven-deploy-plugin:deploy</td><td style="text-align:center">将项目输出构建部署到远程仓库</td></tr>
</tbody>
</table>
<blockquote>
<p>其它阶段并没有绑定 goal 因此什么都不做</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="自定义绑定"></a><a href="#自定义绑定" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>自定义绑定</h3>
<p>例如这么个需求：把源代码也打包成一个 jar 包。默认的打包里，虽然是达成了 jar 包，但是里面都是编译后的 class 文件，并不包含源代码（java 文件），我们只能反编译去看源码。利用 maven-source-plugin 则可以将源代码单独打一个 jar 包</p>
<pre><code class="hljs css language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-source-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.2.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>attach-resources<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>verify<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>jar-no-fork<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
</code></pre>
<ul>
<li>定义一个插件，这里使用的是 maven-source-plugin</li>
<li>定义 executions</li>
<li>executions 包含多个 execution
<ul>
<li>每个 execution 绑定到某一个阶段 phase</li>
<li>每个阶段可以绑定多个 goal</li>
</ul></li>
</ul>
<p>因此，我们执行 <code>mvn verify</code> 就约等于执行了 <code>mvn source:jar-no-fork</code></p>
<blockquote>
<p>实际上 <code>mvn verify</code> 还会执行前面的阶段，而 <code>mvn source:jar-no-fork</code> 仅仅执行这一个目标</p>
</blockquote>
<p><strong>如果我们不定义 goal 与 phase 的绑定，也是可以直接单独执行插件的 goal 的</strong></p>
<blockquote>
<p>我们不写 goal 与 phase 的绑定，运行 mvn verify 发现效果也是一样的，这是因为有的插件将编写时都绑定了默认的阶段，所以我们主要还是要熟悉插件。</p>
<p>例如 springboot 的打包插件，我们就不需要定义 goal，goal 默认就与 phase 绑定了。我们可以直接执行 mvn clean package</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="了解插件使用详情"></a><a href="#了解插件使用详情" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>了解插件使用详情</h3>
<p>如果我们想要知道插件的信息可以使用如下命令</p>
<pre><code class="hljs">mvn <span class="hljs-keyword">help</span>:<span class="hljs-keyword">describe</span> -Dplugin=org.apache.maven.plugins:maven-<span class="hljs-keyword">source</span>-<span class="hljs-keyword">plugin</span>:<span class="hljs-number">3.2</span><span class="hljs-number">.1</span> -Ddetail
</code></pre>
<p>截取一段输出</p>
<pre><code class="hljs css language-bash">Name: Apache Maven Source Plugin
Description: The Maven Source Plugin creates a JAR archive of the <span class="hljs-built_in">source</span>
  files of the current project.
Group Id: org.apache.maven.plugins
Artifact Id: maven-source-plugin
Version: 3.2.1
Goal Prefix: <span class="hljs-built_in">source</span>

This plugin has 7 goals:

<span class="hljs-built_in">source</span>:aggregate
  Description: Aggregate sources <span class="hljs-keyword">for</span> all modules <span class="hljs-keyword">in</span> an aggregator project.
  Implementation: org.apache.maven.plugins.source.AggregatorSourceJarMojo
  Language: java
  Bound to phase: package
  Before this goal executes, it will call:
    Phase: <span class="hljs-string">'generate-sources'</span>

  Available parameters:

    archive
      The archive configuration to use. See Maven Archiver Reference.
      Note: Since 3.0.0 the resulting archives contain a maven descriptor. If
      you need to suppress the generation of the maven descriptor you can
      simply achieve this by using the archiver configuration..

    attach (Default: <span class="hljs-literal">true</span>)
      User property: maven.source.attach
      Specifies whether or not to attach the artifact to the project

</code></pre>
<p>可以看到，这些信息说：</p>
<ul>
<li>这个插件有 7 个 goal</li>
<li>source:aggregate 是其中的一个 goal
<ul>
<li>它有一些可选的参数，有的是默认的，我们可以通过传入 java系统属性来改变参数值</li>
<li>例如 attach 参数，默认是 true，我们通过 <code>-Dmaven.source.attach=false</code> 可以将其设置为 false</li>
<li>有的参数例如 archive，它没有表达式形式，只能在 pom 文件里配置（参考下面内容）</li>
</ul></li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="在-pom-中配置插件的参数"></a><a href="#在-pom-中配置插件的参数" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>在 pom 中配置插件的参数</h3>
<p>有很多插件的参数我们可能只需要配置一次，之后就几乎不会再修改了，这类参数其实不适合放在命令行里，更适合放在 pom 文件里定义。我们可以这样来定义插件的参数</p>
<pre><code class="hljs css language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-source-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.2.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">attach</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">attach</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>attach-resources<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>verify<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>jar-no-fork<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
</code></pre>
<p>只需要定义一个 configuration 即可，attach 元素即表示插件的 attach 参数，这样的配置效果等同于</p>
<p><code>-Dmaven.source.attach=false</code></p>
<p>并且 configuration 这里是作用于这个插件的，我们也可以将 configuration 配置在 execution 节点里面，这样就是作用于这个阶段的配置</p>
<h3><a class="anchor" aria-hidden="true" id="插件仓库"></a><a href="#插件仓库" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>插件仓库</h3>
<p>有时候我们的插件不在中央仓库，可能需要单独配置插件仓库，使用</p>
<pre><code class="hljs css language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">pluginRepositories</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">pluginRepositories</span>&gt;</span>
</code></pre>
<p>来配置</p>
<h3><a class="anchor" aria-hidden="true" id="插件前缀"></a><a href="#插件前缀" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>插件前缀</h3>
<p>插件前缀也就是 help:describe 这种方式来调用插件的目标，实际上我们没有给出插件完整的 groupId 和 artifactId，但是 maven 还是解析到了相应的插件，这个功能就是插件前缀。</p>
<p>插件前缀是配置在maven元数据里的，所有如果我们自己的插件也想配置的话，需要修改maven元数据，反正暂时我没这个需求，就先不研究了</p>
<h2><a class="anchor" aria-hidden="true" id="依赖管理"></a><a href="#依赖管理" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>依赖管理</h2>
<h3><a class="anchor" aria-hidden="true" id="scope-范围"></a><a href="#scope-范围" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>scope 范围</h3>
<table>
<thead>
<tr><th style="text-align:left">scope</th><th style="text-align:left">说明</th><th style="text-align:left">示例</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">compile</td><td style="text-align:left">编译时需要用到该jar包（默认）</td><td style="text-align:left">commons-logging</td></tr>
<tr><td style="text-align:left">test</td><td style="text-align:left">编译Test时需要用到该jar包</td><td style="text-align:left">junit</td></tr>
<tr><td style="text-align:left">runtime</td><td style="text-align:left">编译时不需要，但运行时需要用到</td><td style="text-align:left">mysql</td></tr>
<tr><td style="text-align:left">provided</td><td style="text-align:left">编译时需要用到，但运行时由JDK或某个服务器提供</td><td style="text-align:left">servlet-api</td></tr>
</tbody>
</table>
<blockquote>
<p>典型 test 就是 Junit，在编译 test 包的时候才需要，编译项目真正的代码时是不需要它的</p>
<p>典型 runtime 是 mysql 驱动，这种 spi 服务实际上编译时是没有被用到的，如果设置成 compile 类型的话，就不会被打进到 classpath 里，因此设置成 runtime，编译时虽然没用到，但是还是会被扔到 classpath 里</p>
<p>典型 provided 是 servlet API，编译的时候是需要的，但是运行的时候不需要，因为容器会提供</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="依赖传递"></a><a href="#依赖传递" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>依赖传递</h3>
<p>如果 A 对 B 是 compiled 的依赖，B 对 C 也是 compiled 依赖，那么 A 对 C 也是 compiled 依赖。也就是说依赖也是有传递性质的。下面表示依赖的传递范围，最左边的列表示 A 对 B 的依赖，最上面的行表示 B 对 C 的依赖，表中的值表示 A 对 C 的依赖。更多层级的依赖传递以此类推</p>
<table>
<thead>
<tr><th style="text-align:center"></th><th style="text-align:center">compile</th><th style="text-align:center">test</th><th style="text-align:center">provided</th><th style="text-align:center">runtime</th></tr>
</thead>
<tbody>
<tr><td style="text-align:center"><strong>compile</strong></td><td style="text-align:center">compile</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">runtime</td></tr>
<tr><td style="text-align:center"><strong>test</strong></td><td style="text-align:center">test</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">test</td></tr>
<tr><td style="text-align:center"><strong>provided</strong></td><td style="text-align:center">provided</td><td style="text-align:center">-</td><td style="text-align:center">provided</td><td style="text-align:center">provided</td></tr>
<tr><td style="text-align:center"><strong>runtime</strong></td><td style="text-align:center">runtime</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">runtime</td></tr>
</tbody>
</table>
<blockquote>
<ul>
<li>当 B 对 C 的依赖是 complie 的时候，那么 A 对 B 的依赖是什么样的，A 就对 C 的依赖也是什么样的</li>
<li>当 B 对 C 的依赖是 test 的时候，依赖不传递</li>
<li>当 B 对 C 的依赖是 provided 的时候，A 对 B 也是 provided 依赖的时候才传递对 C 的 provided 依赖</li>
<li>当 B 对 C 的依赖是 complie 的时候，那么 A 对 B 的依赖是什么样的，A 就对 C 的依赖也是什么样的（compile 除外）</li>
</ul>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="依赖优先级"></a><a href="#依赖优先级" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>依赖优先级</h3>
<p>依赖的优先级分两种情况：</p>
<ul>
<li>路径短的优先：A-&gt;B-&gt;C-&gt;X(2.0) 和 A-&gt;D-&gt;X(1.0) 这两种情况下，第一种的路径长度是 3，第二种的路径长度是 2，因此最终 X 的版本是 1.0，选择了路径长度最短的那个</li>
<li>先声明的优先：A-&gt;E-&gt;X(2.0) 和 A-&gt;D-&gt;X(1.0) 这两种情况下，两个路径长度都是 2，此时只靠第一条规则是无法确定谁优先的，因此引入了另一条规则，也就是先声明的优先。A 对 E 和 A 对 D 的依赖，谁在 pom 文件里声明在前面谁就优先采用</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="排除依赖"></a><a href="#排除依赖" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>排除依赖</h3>
<pre><code class="hljs css language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">execlusions</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">execlusions</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<blockquote>
<p>对某个想要排除的子依赖，添加 execlusions 节点</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="查看依赖"></a><a href="#查看依赖" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>查看依赖</h3>
<pre><code class="hljs"><span class="hljs-keyword">mvn </span>dependency:tree
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="分析依赖"></a><a href="#分析依赖" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>分析依赖</h3>
<pre><code class="hljs"><span class="hljs-keyword">mvn </span>dependency:analyze
</code></pre>
<p>输出</p>
<pre><code class="hljs"><span class="hljs-selector-attr">[WARNING]</span> <span class="hljs-selector-tag">Used</span> <span class="hljs-selector-tag">undeclared</span> <span class="hljs-selector-tag">dependencies</span> <span class="hljs-selector-tag">found</span>:
<span class="hljs-selector-attr">[WARNING]</span>    <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-pseudo">:spring-webmvc</span><span class="hljs-selector-pseudo">:jar</span><span class="hljs-selector-pseudo">:5.2.4.RELEASE</span><span class="hljs-selector-pseudo">:compile</span>
<span class="hljs-selector-attr">[WARNING]</span>    <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.aspectj</span><span class="hljs-selector-pseudo">:aspectjweaver</span><span class="hljs-selector-pseudo">:jar</span><span class="hljs-selector-pseudo">:1.9.5</span><span class="hljs-selector-pseudo">:compile</span>
<span class="hljs-selector-attr">[WARNING]</span>    <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-pseudo">:spring-web</span><span class="hljs-selector-pseudo">:jar</span><span class="hljs-selector-pseudo">:5.2.4.RELEASE</span><span class="hljs-selector-pseudo">:compile</span>
<span class="hljs-selector-attr">[WARNING]</span>    <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-pseudo">:spring-context</span><span class="hljs-selector-pseudo">:jar</span><span class="hljs-selector-pseudo">:5.2.4.RELEASE</span><span class="hljs-selector-pseudo">:compile</span>
<span class="hljs-selector-attr">[WARNING]</span>    <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-pseudo">:spring-core</span><span class="hljs-selector-pseudo">:jar</span><span class="hljs-selector-pseudo">:5.2.4.RELEASE</span><span class="hljs-selector-pseudo">:compile</span>
<span class="hljs-selector-attr">[WARNING]</span>    <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.junit</span><span class="hljs-selector-class">.jupiter</span><span class="hljs-selector-pseudo">:junit-jupiter-api</span><span class="hljs-selector-pseudo">:jar</span><span class="hljs-selector-pseudo">:5.5.2</span><span class="hljs-selector-pseudo">:test</span>
<span class="hljs-selector-attr">[WARNING]</span>    <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.google</span><span class="hljs-selector-class">.zxing</span><span class="hljs-selector-pseudo">:core</span><span class="hljs-selector-pseudo">:jar</span><span class="hljs-selector-pseudo">:3.4.0</span><span class="hljs-selector-pseudo">:compile</span>
<span class="hljs-selector-attr">[WARNING]</span>    <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.assertj</span><span class="hljs-selector-pseudo">:assertj-core</span><span class="hljs-selector-pseudo">:jar</span><span class="hljs-selector-pseudo">:3.13.2</span><span class="hljs-selector-pseudo">:test</span>
<span class="hljs-selector-attr">[WARNING]</span>    <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.fasterxml</span><span class="hljs-selector-class">.jackson</span><span class="hljs-selector-class">.core</span><span class="hljs-selector-pseudo">:jackson-databind</span><span class="hljs-selector-pseudo">:jar</span><span class="hljs-selector-pseudo">:2.10.2</span><span class="hljs-selector-pseudo">:compile</span>
<span class="hljs-selector-attr">[WARNING]</span>    <span class="hljs-selector-tag">jakarta</span><span class="hljs-selector-class">.validation</span><span class="hljs-selector-pseudo">:jakarta.validation-api</span><span class="hljs-selector-pseudo">:jar</span><span class="hljs-selector-pseudo">:2.0.2</span><span class="hljs-selector-pseudo">:compile</span>
<span class="hljs-selector-attr">[WARNING]</span>    <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.apache</span><span class="hljs-selector-class">.tomcat</span><span class="hljs-selector-class">.embed</span><span class="hljs-selector-pseudo">:tomcat-embed-core</span><span class="hljs-selector-pseudo">:jar</span><span class="hljs-selector-pseudo">:9.0.31</span><span class="hljs-selector-pseudo">:compile</span>
<span class="hljs-selector-attr">[WARNING]</span>    <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-pseudo">:spring-tx</span><span class="hljs-selector-pseudo">:jar</span><span class="hljs-selector-pseudo">:5.2.4.RELEASE</span><span class="hljs-selector-pseudo">:compile</span>
<span class="hljs-selector-attr">[WARNING]</span>    <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.slf4j</span><span class="hljs-selector-pseudo">:slf4j-api</span><span class="hljs-selector-pseudo">:jar</span><span class="hljs-selector-pseudo">:1.7.30</span><span class="hljs-selector-pseudo">:compile</span>
<span class="hljs-selector-attr">[WARNING]</span>    <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.mybatis</span><span class="hljs-selector-pseudo">:mybatis</span><span class="hljs-selector-pseudo">:jar</span><span class="hljs-selector-pseudo">:3.5.3</span><span class="hljs-selector-pseudo">:compile</span>
<span class="hljs-selector-attr">[WARNING]</span>    <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.fasterxml</span><span class="hljs-selector-class">.jackson</span><span class="hljs-selector-class">.core</span><span class="hljs-selector-pseudo">:jackson-annotations</span><span class="hljs-selector-pseudo">:jar</span><span class="hljs-selector-pseudo">:2.10.2</span><span class="hljs-selector-pseudo">:compile</span>
<span class="hljs-selector-attr">[WARNING]</span> <span class="hljs-selector-tag">Unused</span> <span class="hljs-selector-tag">declared</span> <span class="hljs-selector-tag">dependencies</span> <span class="hljs-selector-tag">found</span>:
<span class="hljs-selector-attr">[WARNING]</span>    <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.boot</span><span class="hljs-selector-pseudo">:spring-boot-starter-web</span><span class="hljs-selector-pseudo">:jar</span><span class="hljs-selector-pseudo">:2.2.5.RELEASE</span><span class="hljs-selector-pseudo">:compile</span>
<span class="hljs-selector-attr">[WARNING]</span>    <span class="hljs-selector-tag">mysql</span><span class="hljs-selector-pseudo">:mysql-connector-java</span><span class="hljs-selector-pseudo">:jar</span><span class="hljs-selector-pseudo">:8.0.19</span><span class="hljs-selector-pseudo">:runtime</span>
<span class="hljs-selector-attr">[WARNING]</span>    <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.boot</span><span class="hljs-selector-pseudo">:spring-boot-starter-jdbc</span><span class="hljs-selector-pseudo">:jar</span><span class="hljs-selector-pseudo">:2.2.5.RELEASE</span><span class="hljs-selector-pseudo">:compile</span>
<span class="hljs-selector-attr">[WARNING]</span>    <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.boot</span><span class="hljs-selector-pseudo">:spring-boot-configuration-processor</span><span class="hljs-selector-pseudo">:jar</span><span class="hljs-selector-pseudo">:2.2.5.RELEASE</span><span class="hljs-selector-pseudo">:compile</span>
<span class="hljs-selector-attr">[WARNING]</span>    <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.boot</span><span class="hljs-selector-pseudo">:spring-boot-starter-aop</span><span class="hljs-selector-pseudo">:jar</span><span class="hljs-selector-pseudo">:2.2.5.RELEASE</span><span class="hljs-selector-pseudo">:compile</span>
<span class="hljs-selector-attr">[WARNING]</span>    <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.boot</span><span class="hljs-selector-pseudo">:spring-boot-starter-test</span><span class="hljs-selector-pseudo">:jar</span><span class="hljs-selector-pseudo">:2.2.5.RELEASE</span><span class="hljs-selector-pseudo">:test</span>
<span class="hljs-selector-attr">[WARNING]</span>    <span class="hljs-selector-tag">net</span><span class="hljs-selector-class">.coobird</span><span class="hljs-selector-pseudo">:thumbnailator</span><span class="hljs-selector-pseudo">:jar</span><span class="hljs-selector-pseudo">:0.4.10</span><span class="hljs-selector-pseudo">:compile</span>
<span class="hljs-selector-attr">[WARNING]</span>    <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.mybatis</span><span class="hljs-selector-class">.spring</span><span class="hljs-selector-class">.boot</span><span class="hljs-selector-pseudo">:mybatis-spring-boot-starter</span><span class="hljs-selector-pseudo">:jar</span><span class="hljs-selector-pseudo">:2.1.1</span><span class="hljs-selector-pseudo">:compile</span>
</code></pre>
<p>主要是两个</p>
<ul>
<li>一个是 Used undeclared dependencies found，表示没有声明但是使用了的依赖，这是传递性依赖带来的</li>
<li>一个是 Unused declared dependencies found，表示声明了但是没有使用。但是实际上这些很多都使用了，springboot 的 starter 包都是我们需要用到的，所以这些依赖分析看看就好。具体是否真的没使用到需要自己进行仔细的分析</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="管理依赖版本"></a><a href="#管理依赖版本" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>管理依赖版本</h3>
<pre><code class="hljs css language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2.0.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2.0.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>
</code></pre>
<ul>
<li>使用 <code>&lt;dependencyManagement&gt;</code> 可以管理依赖版本</li>
<li>里面定义的依赖表示依赖的版本信息，并不会真的引入这些依赖</li>
<li>当我们使用普通的 <code>&lt;dependency&gt;</code> 引入依赖的时候，如果这些依赖在 <code>&lt;dependencyManagement&gt;</code> 里定义了，就不需要在写依赖的版本，版本默认使用 <code>&lt;dependencyManagement&gt;</code> 定义的版本</li>
<li>一般用在父 pom  中</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="聚合和继承"></a><a href="#聚合和继承" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>聚合和继承</h2>
<h3><a class="anchor" aria-hidden="true" id="聚合"></a><a href="#聚合" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>聚合</h3>
<pre><code class="hljs css language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>gs-multi-module<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>library<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>application<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<ul>
<li>packaging 打包方式为 pom</li>
<li>modules 中每个 module 都是一个相对路径（不一定代表模块自身 pom 中定义的名字）</li>
<li>这里 library 和 application 目录下其实都是一个完整的 springboot 应用</li>
</ul>
<p>当我们执行 <code>mvn clean install</code> 的时候，实际上对所有包含的模块都执行了这两个生命周期，但是执行的顺序也是有规则的</p>
<pre><code class="hljs">[<span class="hljs-builtin-name">INFO</span>] Reactor Build Order:
[<span class="hljs-builtin-name">INFO</span>]
[<span class="hljs-builtin-name">INFO</span>] multi-module-library                                               [jar]
[<span class="hljs-builtin-name">INFO</span>] multi-module-application                                           [jar]
[<span class="hljs-builtin-name">INFO</span>] gs-multi-module                                                    [pom]
</code></pre>
<p>这个顺序叫做反应堆构建顺序，后面再进行说明</p>
<h3><a class="anchor" aria-hidden="true" id="继承"></a><a href="#继承" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>继承</h3>
<h4><a class="anchor" aria-hidden="true" id="创建-maven-项目"></a><a href="#创建-maven-项目" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>创建 maven 项目</h4>
<p>在顶层聚合模块下执行</p>
<pre><code class="hljs">mvn archetype:<span class="hljs-keyword">generate</span>
</code></pre>
<p>随后根据提示选择骨架插件</p>
<pre><code class="hljs"><span class="hljs-number">7</span>: internal -&gt; org.apache.maven.archetypes:maven-archetype-quickstart (<span class="hljs-type">An</span> archetype which contains a sample <span class="hljs-type">Maven</span> project.)
</code></pre>
<p>然后根据提示输入</p>
<ul>
<li>groupId：com.example</li>
<li>artifactId：child</li>
<li>version：0.0.1-SNAPSHOT</li>
<li>package：com.example.child</li>
</ul>
<pre><code class="hljs css language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">pluginManagement</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.johnzon<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>johnzon-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${johnzon.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">pluginManagement</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
</code></pre>
<ul>
<li>这里定义插件的版本</li>
<li>这里也可以定义好插件的 goal 和 phase 的绑定</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="聚合和继承模块的关系"></a><a href="#聚合和继承模块的关系" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>聚合和继承模块的关系</h3>
<p>两者不是一个模块，但是也可以写在一个模块里，因此多半还是当做一个模块来写，父模块既是聚合又是被子模块继承的模块</p>
<h2><a class="anchor" aria-hidden="true" id="测试"></a><a href="#测试" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>测试</h2>
<p>maven 的测试阶段是 maven-surefire-plugin 提供的功能</p>
<p>默认情况下它会执行测试路径下（src/test/java/）的测试类，测试类的命名符合以下规则：</p>
<ul>
<li>Test*.java</li>
<li>*Test.java</li>
<li>*TestCase.java</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="跳过测试"></a><a href="#跳过测试" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>跳过测试</h3>
<p><code>mvn clean package -DskipTests</code>  或者 <code>mvn clean package -Dmaven.test.skip=true</code></p>
<p>后者不仅跳过测试，测试代码的编译都直接跳过了</p>
<p>一般仅仅临时性的跳过，长期跳过测试是非常不推荐的</p>
<h3><a class="anchor" aria-hidden="true" id="动态指定测试用例"></a><a href="#动态指定测试用例" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>动态指定测试用例</h3>
<p>有的时候我们专门针对某个测试用例，想要测试它是否通过（比如专门修一个bug），这个时候傻傻的执行全部的测试用例肯定是很浪费时间的，因此需要单独指定测试用例，可以使用</p>
<p><code>mvn test -Dtest=SomeTest,AnotherTest</code></p>
<p>这个时候就只执行这两个测试类里面的用例，高级点的还可以支持通配符</p>
<p><code>mvn test -Dtest=Some*Test</code></p>
<h3><a class="anchor" aria-hidden="true" id="包含和排除测试用例"></a><a href="#包含和排除测试用例" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>包含和排除测试用例</h3>
<pre><code class="hljs css language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.22.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*Tests.java<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">excludes</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">exclude</span>&gt;</span>**/SomeTest.java<span class="hljs-tag">&lt;/<span class="hljs-name">exclude</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">excludes</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
</code></pre>
<ul>
<li>所有 Tests 也包含进来当做测试用例</li>
<li>SomeTest 不要当做测试用例，进行排除</li>
</ul>
<blockquote>
<p>这种方式主要是为了兼容老系统</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="测试报告"></a><a href="#测试报告" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>测试报告</h3>
<p>默认情况下，maven-surefire-plugin 会在 target/surefire-reports 目录下生成两种风格的测试报告</p>
<ul>
<li>简单文本</li>
<li>与 Junit 兼容的 XML</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="测试覆盖率报告"></a><a href="#测试覆盖率报告" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>测试覆盖率报告</h3>
<p>使用 jacoco</p>
<pre><code class="hljs css language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.jacoco<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jacoco-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.8.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>default-prepare-agent<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>prepare-agent<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>default-report<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>report<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
</code></pre>
<ul>
<li>最终报告在 target/site/jacoco/index.html 是总的报告</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="构建"></a><a href="#构建" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>构建</h2>
<h3><a class="anchor" aria-hidden="true" id="内置属性"></a><a href="#内置属性" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>内置属性</h3>
<ul>
<li>${basedir}：表示包含这个 pom 文件的目录，也就是项目根目录</li>
<li>${version}：表示项目版本</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="pom-内置属性"></a><a href="#pom-内置属性" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>pom 内置属性</h3>
<ul>
<li>${project.build.sourceDirectory}：项目的主源码目录，默认是 src/main/java</li>
<li>${project.build.testSourceDirectory}：项目的测试源码目录，默认是 src/test/java</li>
<li>${project.build.directory}：项目构建输出目录，默认是 target/</li>
<li>${project.outputDirectory}：项目的主代码编译输出目录，默认是 target/classes/</li>
<li>${project.testOutputDirectory}：项目的测试代码编译输出目录，默认是 target/test-classes/</li>
<li>${project.groupId}：项目的 groupId</li>
<li>${project.artifactId}：项目的 artifactId</li>
<li>${project.version}：项目的 version 与 ${version} 等价</li>
<li>${project.build.finalName}：项目打包输出文件的名称，默认是 <code>${project.artifactId}-${project.version}</code>，例如 myProject-0.0.1.jar，最后的后缀名取决于打包方式</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="自定义属性"></a><a href="#自定义属性" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>自定义属性</h3>
<p>在 <code>&lt;properties&gt;</code> 标签下面随意定义属性</p>
<h3><a class="anchor" aria-hidden="true" id="java-系统属性"></a><a href="#java-系统属性" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>java 系统属性</h3>
<p>所有的 java 系统属性都可以被 maven 访问，例如 ${user.home} 指向了用户目录</p>
<h3><a class="anchor" aria-hidden="true" id="环境变量属性"></a><a href="#环境变量属性" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>环境变量属性</h3>
<p>所有环境变量都可以使用以 <code>env.</code> 开头的 maven 属性引用，例如 ${env.JAVA_HOME} 就表示引用了 $JAVA_HOME</p>
<h3><a class="anchor" aria-hidden="true" id="配置属性替换"></a><a href="#配置属性替换" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>配置属性替换</h3>
<p>资源文件</p>
<pre><code class="hljs css language-properties"><span class="hljs-attr">aaa</span>=<span class="hljs-string">${basedir}</span>
</code></pre>
<p>pom 配置 resources 替换</p>
<pre><code class="hljs css language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>${basedir}/src/main/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">testResources</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">testResource</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>${basedir}/src/test/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">testResource</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">testResources</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="springboot-配置属性替换"></a><a href="#springboot-配置属性替换" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>springboot 配置属性替换</h3>
<p>在 springboot 中，我们都继承了 springboot 的 pom，它将属性的占位符替换了 <code>@</code>，具体的配置是</p>
<p><code>&lt;resource.delimiter&gt;@&lt;/resource.delimiter&gt;</code></p>
<p>因此我们在 springboot 中，资源文件应该是：</p>
<pre><code class="hljs css language-properties"><span class="hljs-attr">aaa</span>=<span class="hljs-string">@basedir@</span>
</code></pre>
<p>这样才能进行配置属性的替换</p>
<h3><a class="anchor" aria-hidden="true" id="profile-配置"></a><a href="#profile-配置" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>profile 配置</h3>
<pre><code class="hljs css language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">profiles</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>dev<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">myProper</span>&gt;</span>aaa<span class="hljs-tag">&lt;/<span class="hljs-name">myProper</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">myProper</span>&gt;</span>bbb<span class="hljs-tag">&lt;/<span class="hljs-name">myProper</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">profiles</span>&gt;</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="激活-profile"></a><a href="#激活-profile" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>激活 profile</h3>
<h4><a class="anchor" aria-hidden="true" id="命令行激活"></a><a href="#命令行激活" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>命令行激活</h4>
<p><code>mvn clean install -Pdev,test</code></p>
<p>使用 -P 参数激活 profile，profile 可以激活多个，不局限于一定只能激活一个</p>
<h4><a class="anchor" aria-hidden="true" id="系统属性激活"></a><a href="#系统属性激活" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>系统属性激活</h4>
<p>我们可以配置当某个 java 系统属性存在时（-D 参数配置），自动激活 profile</p>
<pre><code class="hljs css language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">profiles</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>dev<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">myProper</span>&gt;</span>aaa<span class="hljs-tag">&lt;/<span class="hljs-name">myProper</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">activation</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>dev<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">activation</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">myProper</span>&gt;</span>bbb<span class="hljs-tag">&lt;/<span class="hljs-name">myProper</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">profiles</span>&gt;</span>
</code></pre>
<p>这里表示当存在 -Ddev 时，就激活 dev 这个 profile</p>
<p>可以进一步配置属性值时才激活，例如</p>
<pre><code class="hljs css language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">profiles</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>dev<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">myProper</span>&gt;</span>aaa<span class="hljs-tag">&lt;/<span class="hljs-name">myProper</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">activation</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>dev<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>x<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">activation</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">myProper</span>&gt;</span>bbb<span class="hljs-tag">&lt;/<span class="hljs-name">myProper</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">profiles</span>&gt;</span>
</code></pre>
<p>这里表示当存在 -Ddev=x 时，就激活 dev 这个 profile，也就是既要存在 dev 系统属性，也要值等于 x</p>
<h4><a class="anchor" aria-hidden="true" id="操作系统环境激活"></a><a href="#操作系统环境激活" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>操作系统环境激活</h4>
<p>profile 还可以根据系统环境来激活，根据不同的操作系统激活不同的配置</p>
<pre><code class="hljs css language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">profiles</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>dev<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">myProper</span>&gt;</span>aaa<span class="hljs-tag">&lt;/<span class="hljs-name">myProper</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">activation</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">os</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>Win10<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Windows<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">arch</span>&gt;</span>x86<span class="hljs-tag">&lt;/<span class="hljs-name">arch</span>&gt;</span>
                <span class="hljs-comment">&lt;!-- &lt;version&gt;&lt;/version&gt;--&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">os</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">activation</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">myProper</span>&gt;</span>bbb<span class="hljs-tag">&lt;/<span class="hljs-name">myProper</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">profiles</span>&gt;</span>
</code></pre>
<ul>
<li>这里 family 的值包括 Windows、UNIX、Mac 等</li>
<li>其它几项 name、arch、version 可以通过查看环境中的系统属性 os.name、os.arch、os.version 获得</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="文件存在与否激活"></a><a href="#文件存在与否激活" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>文件存在与否激活</h4>
<p>还可以根据某个文件是否存在来决定激活的 profile</p>
<pre><code class="hljs css language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">profiles</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>dev<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">myProper</span>&gt;</span>aaa<span class="hljs-tag">&lt;/<span class="hljs-name">myProper</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">activation</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">file</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">missing</span>&gt;</span>x.properties<span class="hljs-tag">&lt;/<span class="hljs-name">missing</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">exists</span>&gt;</span>y.properties<span class="hljs-tag">&lt;/<span class="hljs-name">exists</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">file</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">activation</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">myProper</span>&gt;</span>bbb<span class="hljs-tag">&lt;/<span class="hljs-name">myProper</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">profiles</span>&gt;</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="默认激活"></a><a href="#默认激活" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>默认激活</h4>
<p>我们可以定义某个 profile 在不做选择的时候默认激活</p>
<pre><code class="hljs css language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">profiles</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>dev<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">myProper</span>&gt;</span>aaa<span class="hljs-tag">&lt;/<span class="hljs-name">myProper</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">activation</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">activeByDefault</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">activeByDefault</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">activation</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">myProper</span>&gt;</span>bbb<span class="hljs-tag">&lt;/<span class="hljs-name">myProper</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">profiles</span>&gt;</span>
</code></pre>
<p>如果我们以上其它任何一种方式激活了某个 profile，那么我们默认激活的 profile 就会失效</p>
<h3><a class="anchor" aria-hidden="true" id="查看-profile"></a><a href="#查看-profile" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>查看 profile</h3>
<ul>
<li><code>mvn help:active-profiles</code> 列出激活的 profile</li>
<li><code>mvn help:all-profiles</code> 列出所有 profile</li>
</ul>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 3/23/2020</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/java系列/java的SecurityManager"><span class="arrow-prev">← </span><span class="function-name-prevnext">java的SecurityManager</span></a><a class="docs-next button" href="/docs/nodejs/语法基础和数据类型"><span>语法基础和数据类型</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#设置-maven_opts-环境变量">设置 MAVEN_OPTS 环境变量</a></li><li><a href="#配置仓库镜像">配置仓库镜像</a></li><li><a href="#搜索第三方组件">搜索第三方组件</a></li><li><a href="#生命周期">生命周期</a><ul class="toc-headings"><li><a href="#clean">clean</a></li><li><a href="#default">default</a></li><li><a href="#生命周期与阶段">生命周期与阶段</a></li></ul></li><li><a href="#插件和目标">插件和目标</a><ul class="toc-headings"><li><a href="#如何执行目标">如何执行目标</a></li><li><a href="#内置绑定">内置绑定</a></li><li><a href="#自定义绑定">自定义绑定</a></li><li><a href="#了解插件使用详情">了解插件使用详情</a></li><li><a href="#在-pom-中配置插件的参数">在 pom 中配置插件的参数</a></li><li><a href="#插件仓库">插件仓库</a></li><li><a href="#插件前缀">插件前缀</a></li></ul></li><li><a href="#依赖管理">依赖管理</a><ul class="toc-headings"><li><a href="#scope-范围">scope 范围</a></li><li><a href="#依赖传递">依赖传递</a></li><li><a href="#依赖优先级">依赖优先级</a></li><li><a href="#排除依赖">排除依赖</a></li><li><a href="#查看依赖">查看依赖</a></li><li><a href="#分析依赖">分析依赖</a></li><li><a href="#管理依赖版本">管理依赖版本</a></li></ul></li><li><a href="#聚合和继承">聚合和继承</a><ul class="toc-headings"><li><a href="#聚合">聚合</a></li><li><a href="#继承">继承</a></li><li><a href="#聚合和继承模块的关系">聚合和继承模块的关系</a></li></ul></li><li><a href="#测试">测试</a><ul class="toc-headings"><li><a href="#跳过测试">跳过测试</a></li><li><a href="#动态指定测试用例">动态指定测试用例</a></li><li><a href="#包含和排除测试用例">包含和排除测试用例</a></li><li><a href="#测试报告">测试报告</a></li><li><a href="#测试覆盖率报告">测试覆盖率报告</a></li></ul></li><li><a href="#构建">构建</a><ul class="toc-headings"><li><a href="#内置属性">内置属性</a></li><li><a href="#pom-内置属性">pom 内置属性</a></li><li><a href="#自定义属性">自定义属性</a></li><li><a href="#java-系统属性">java 系统属性</a></li><li><a href="#环境变量属性">环境变量属性</a></li><li><a href="#配置属性替换">配置属性替换</a></li><li><a href="#springboot-配置属性替换">springboot 配置属性替换</a></li><li><a href="#profile-配置">profile 配置</a></li><li><a href="#激活-profile">激活 profile</a></li><li><a href="#查看-profile">查看 profile</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/mark-github.svg" alt="影子的知识库" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/en/doc1.html">Getting Started (or other categories)</a><a href="/docs/en/doc2.html">Guides (or other categories)</a><a href="/docs/en/doc3.html">API Reference (or other categories)</a></div><div><h5>Community</h5><a href="/en/users.html">User Showcase</a><a href="https://stackoverflow.com/questions/tagged/" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://discordapp.com/">Project Chat</a><a href="https://twitter.com/" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="https://github.com/">GitHub</a></div></section><section class="copyright">Copyright © 2020 Cen ZhiPeng</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                appId: 'QY49S75304',
                apiKey: '411affb22749e84f2506f330ffac2fba',
                indexName: 'knowledge_base',
                inputSelector: '#search_input_react'
              });
            </script></body></html>