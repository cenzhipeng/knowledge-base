---
id: å­—ç¬¦ä¸²å’Œæ­£åˆ™è¡¨è¾¾å¼
title: æœ¬æ–‡å†…å®¹
sidebar_label: å­—ç¬¦ä¸²å’Œæ­£åˆ™è¡¨è¾¾å¼
---



## UTF-16 å’Œ Unicode

Unicode ä¸ºå…¨ä¸–ç•Œæ‰€æœ‰çš„å­—ç¬¦æä¾›äº†ä¸€ä¸ªå¯¹åº”çš„å€¼ï¼Œä¾‹å¦‚ a å¯¹åº” 1ï¼Œb å¯¹åº” 2..."äºº" å¯¹åº” 2333ï¼ˆä»¥ä¸Šçš„å€¼éƒ½æ˜¯æˆ‘çç¼–çš„ï¼‰ï¼Œ**å®ƒä»…ä»…æ˜¯è§„å®šäº†å­—ç¬¦å’Œå®ƒå¯¹åº”çš„å€¼**ã€‚

è€Œ UTF-8ã€UTF-16ã€UTF-32 è¿™äº›ï¼Œéƒ½æ˜¯å±äºå­—ç¬¦ç¼–ç ï¼Œå®ƒä»¬çš„ä½œç”¨æ˜¯ç”¨ 8 ä½ã€16ä½ã€32ä½ ç­‰æ¥è¡¨ç¤ºä¸€ä¸ª Unicode å­—ç¬¦ï¼ˆä¹Ÿå°±æ˜¯ç”¨ 1ã€2ã€4 ä¸ªå­—èŠ‚æ¥è¡¨ç¤º Unicode é‡Œè§„å®šçš„ç å€¼ï¼‰

æ˜¾ç„¶ï¼Œå­—ç¬¦é‚£ä¹ˆå¤šï¼Œ8 ä½ä¸å¯èƒ½è¡¨ç¤ºå®Œä¸–ç•Œä¸Šæ‰€æœ‰çš„å­—ç¬¦ï¼Œæ‰€ä»¥ UTF-8 æä¾›äº†ä¸€ç§æ‰©å±•æœºåˆ¶ï¼Œ8 ä½æœ€å¤šè¡¨ç¤º 256 ç§çŠ¶æ€ï¼ŒUTF-8 ä¼šç•™ä¸‹ä¸€éƒ¨åˆ†çš„å€¼ï¼Œæ ‡è¯†ä¸ºä¸€ä¸ªæ‰©å±•ã€‚ä¾‹å¦‚å½“æˆ‘ä»¬è¯»å–ä¸€ä¸ªå­—èŠ‚ï¼Œå‘ç°è¯»å–åˆ°çš„æ˜¯ 255 æ—¶ï¼Œä»£è¡¨è¿™ä¸€ä¸ª UTF-8 ç¼–ç è¿˜æ²¡æœ‰å°†ä¸€ä¸ªå­—ç¬¦ç¼–ç å®Œå…¨ï¼Œéœ€è¦å†è¯»ä¸€ä¸ª UTF-8 æ¥ç¡®å®šå‰©ä¸‹çš„ç¼–ç ã€‚ï¼ˆ255 æ˜¯æˆ‘ç¼–çš„ï¼Œä½†æ˜¯è‚¯å®šæ˜¯è¯»å–åˆ°æŸäº›å€¼å°±å½“åšä¸€ä¸ªæ‰©å±•ç ä½ï¼‰

ä¹Ÿå°±æ˜¯è¯´ï¼Œä¼šä½¿ç”¨å¤šä¸ª UTF-8 ç ä½æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼ˆç§°ä¹‹ä¸º**ä»£ç†å¯¹**ï¼‰ã€‚åŒæ ·çš„ UTF-16 ä¹Ÿä¸€æ ·é¢ä¸´è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºå­—ç¬¦æ€»é‡è¶…è¿‡äº† 65536 ä¸ªï¼Œ16 ä½ä¹Ÿæ— æ³•è¡¨ç¤ºæ‰€æœ‰å­—ç¬¦ï¼ŒUTF-16 ä¾ç„¶éœ€è¦æ‰©å±•ç ä½ï¼ˆ**ä»£ç†å¯¹**ï¼‰ã€‚ç°ä»£æ¥è¯´ï¼ŒUTF-32 æ˜¯ä¸éœ€è¦æ‰©å±•ç ä½çš„ï¼Œä½†æ˜¯æ‰€æœ‰çš„å­—ç¬¦éƒ½ç”¨ 32 ä½è¡¨ç¤ºï¼Œå­˜å‚¨ä¼šæœ‰æ‰€æµªè´¹ã€‚



## å…³äºç ä½çš„ API

åœ¨ JavaScript ä¸­ï¼Œå­—ç¬¦ä¸²éƒ½ä½¿ç”¨ UTF-16 ç¼–ç ï¼Œ`str.length` è¿”å›çš„æ˜¯å­—ç¬¦ä¸²çš„ç ä½æ•°é‡ï¼Œå› æ­¤ï¼Œå¯¹äºæŸäº›ç”Ÿåƒ»çš„å­—ç¬¦ï¼Œ`str.length` çš„æ•°é‡å¯èƒ½ä¸å­—ç¬¦ä¸²çš„å­—ç¬¦æ•°é‡ä¸ä¸€è‡´ï¼Œä¾‹å¦‚ï¼š

```javascript
let txt = "ğŸ˜";
console.log(txt.length);  // 2
console.log(txt.charAt(0));  // ï¿½
console.log(txt.charAt(1)); // ï¿½
console.log(txt.charCodeAt(0)); // 55357
console.log(txt.charCodeAt(1)); // 56833
console.log(txt.codePointAt(0)); // 128513
console.log(txt.codePointAt(1)); // 56833
```

è¿™ä¸ª ğŸ˜ å­—ç¬¦æ˜¯é€šè¿‡ 2 ä¸ª UTF-16 ä»£ç†å¯¹è¡¨ç¤ºçš„ï¼Œå› æ­¤ï¼š

- length å°†ä¼šè¿”å› 2
- charAt å°†è¿”å›ä¸å¯æ‰“å°çš„å­—ç¬¦ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªç ä½éƒ½æ˜¯ä»£ç†ä½ï¼Œæ— æ³•è¢«æ‰“å°å‡ºæ¥
- charCodeAt è¿”å›çš„æ˜¯å­—ç¬¦ä¸²ä¸­çš„ç ä½çš„ä¿¡æ¯
- codePointAt é‡åˆ°ä»£ç†å¯¹çš„æ—¶å€™ï¼Œä¼šå°†åç»­çš„ä»£ç†å¯¹å…¨éƒ¨æ‰“å°å‡ºæ¥ï¼Œå› æ­¤å¯ä»¥å®Œæ•´çš„æ‰“å°å‡ºä¸€ä¸ªå­—ç¬¦ä»£è¡¨çš„å€¼
- å½“ codePointAt é‡åˆ°çš„ä¸æ˜¯ä»£ç†å¯¹ï¼Œæ‰“å°çš„å€¼ä¸ charCodeAt æ˜¯ä¸€æ ·çš„

### æ£€æµ‹ä¸€ä¸ªå­—ç¬¦å ç”¨çš„ç¼–ç å•å…ƒæ•°é‡

```javascript
function isBit32(str) {
    return str.codePointAt(0) > 0xFFFF;
}
console.log(isBit32('ğŸ˜')); // true
console.log(isBit32('a')); // false
```

é€»è¾‘å¾ˆç›´æ¥ï¼Œé€šè¿‡è¿™ç§ä¸“é—¨è·å–ä»£ç†å¯¹çš„ API å¾ˆå®¹æ˜“çŸ¥é“å­—ç¬¦æ˜¯å¦æ˜¯ä»£ç†å¯¹æ¥è¡¨ç¤ºçš„

### æ ¹æ®ç ä½ç”Ÿæˆå­—ç¬¦

æˆ‘ä»¬ä¸Šé¢çš„å­—ç¬¦ ğŸ˜ çš„ç ä½æ˜¯ 128513ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è¿™ä¸ªç ä½ï¼Œå†åå‘ç”Ÿæˆè¿™ä¸ªå­—ç¬¦

```javascript
console.log(String.fromCodePoint(128513)); // ğŸ˜
```

> æ€»ä¹‹å°±æ˜¯ï¼Œæˆ‘ä»¬ä½¿ç”¨ CodePoint è€Œä¸æ˜¯ charCode å°±å¯¹äº†



## å…¶å®ƒå­—ç¬¦ä¸²å˜æ›´ API

### å­ä¸²è¯†åˆ«

æˆ‘ä»¬ç»å¸¸æƒ³è¦åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²é‡ŒæŸ¥è¯¢å¦ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦å­˜åœ¨ï¼ŒES 6 ä¸­æœ‰ 3 ä¸ª API

- `includes()`
- `startsWith()`
- `endsWith()`

è¿™ä¸‰ä¸ªæ–¹æ³•çš„ä½œç”¨çœ‹åå­—å°±çŸ¥é“æ˜¯å•¥æ„æ€ï¼Œå°±ä¸å†ç»†è¯´äº†ã€‚

ä»¥ä¸Šä¸‰ä¸ªæ–¹æ³•éƒ½æ¥æ”¶ 2 ä¸ªå‚æ•°ï¼š

- ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šè¦æœç´¢çš„å­—ç¬¦ä¸²æ–‡æœ¬
- ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯é€‰çš„ï¼ŒæŒ‡å®šä¸€ä¸ªæœç´¢çš„ä½ç½®çš„ç´¢å¼•å€¼ã€‚å¦‚æœæŒ‡å®šäº†è¿™ä¸ªä½ç½®ï¼Œincludes å’Œ startsWith éƒ½ä¼šä»è¿™ä¸ªä½ç½®å¼€å§‹æœç´¢ã€‚è€Œ endsWith åˆ™ä»å­—ç¬¦ä¸²é•¿åº¦å‡å»è¿™ä¸ªç´¢å¼•å€¼çš„ä½ç½®å¼€å§‹æœç´¢ï¼ˆä¹Ÿå°±æ˜¯åŒ¹é…å€’æ•°çš„ä½ç½®æ˜¯ä¸æ˜¯è¿™ä¸ªå­—ç¬¦ä¸²ï¼‰ã€‚

### repeat() æ–¹æ³•

å°†ä¸€ä¸ªå­—ç¬¦ä¸²é‡å¤å¤šæ¬¡ã€‚

```javascript
console.log('xa'.repeat(5));
```

è¾“å‡ºï¼š

```javas
(py3.5) czp@:~/workspace/knowledge-base/demos/node_start$ node hello.js
xaxaxaxaxa
```



## æ¨¡æ¿å­—é¢é‡

æ¨¡æ¿å­—é¢é‡æ˜¯å…è®¸åµŒå…¥è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²å­—é¢é‡ã€‚ä½ å¯ä»¥ä½¿ç”¨å¤šè¡Œå­—ç¬¦ä¸²å’Œå­—ç¬¦ä¸²æ’å€¼åŠŸèƒ½ã€‚

ç®€è€Œè¨€ä¹‹ï¼Œæ¨¡æ¿å­—é¢é‡æœ€åä¹Ÿä¼šç”Ÿæˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚

### åŸºç¡€è¯­æ³•

æœ€ç®€å•æ˜¯å°±æ˜¯æŠŠæ¨¡æ¿å­—é¢é‡å½“æˆä¸€ä¸ªå­—ç¬¦ä¸²ä½¿ç”¨

```javascript
console.log(`aaaaaaa`);
```

æ³¨æ„æˆ‘ä»¬è¿™é‡Œçš„å­—ç¬¦ä¸²ï¼Œä¸æ˜¯ä½¿ç”¨å•å¼•å·ï¼Œè€Œæ˜¯ä½¿ç”¨çš„åå¼•å·ç»™åŒ…èµ·æ¥çš„ï¼Œè¿™å°±ä»£è¡¨äº†ä¸€ä¸ªæ¨¡æ¿å­—é¢é‡

æ¨¡æ¿å­—é¢é‡ä¸­ä¸éœ€è¦è½¬ä¹‰å•å¼•å·å’ŒåŒå¼•å·ï¼Œä½†æ˜¯å¦‚æœæƒ³è¾“å‡ºåå¼•å·çš„è¯ï¼Œéœ€è¦è½¬ä¹‰ï¼Œä¹Ÿå°±æ˜¯

```javascript
console.log(`\`aaaaaa\``);
```

### å¤šè¡Œå­—ç¬¦ä¸²

```javascript
let line = `line1
line2`
console.log(line);
console.log(line.length);
```

å°†ä¼šè¾“å‡º

```javascript
(py3.5) czp@:~/workspace/knowledge-base/demos/node_start$ node hello.js
line1
line2
11
```

> åŸç†ï¼šè¢«åå¼•å·åŒ…å›´çš„ç©ºç™½å­—ç¬¦ï¼ˆç©ºæ ¼ã€æ¢è¡Œï¼‰éƒ½è¾“äºå­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†

æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªç‰¹æ€§æ¥åˆ›å»ºå¤šè¡Œå­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œè¦å°å¿ƒç¼©è¿›ï¼Œä¾‹å¦‚ï¼š

```javascript
let line = `line1
            line2`
console.log(line);
console.log(line.length);
```

å°†ä¼šè¾“å‡º

```javascript
(py3.5) czp@:~/workspace/knowledge-base/demos/node_start$ node hello.js
line1
            line2
23
```

#### æœ€ä½³å®è·µ

```javascript
let line = `
<div>
    xxx
</div>`
console.log(line.trim());
console.log(line.length);
```

è¾“å‡º

```javascript
(py3.5) czp@:~/workspace/knowledge-base/demos/node_start$ node hello.js
<div>
    xxx
</div>
21
```

æˆ‘ä»¬é€šè¿‡ç¬¬ä¸€è¡Œç•™ç™½ï¼Œç„¶å trimï¼Œæ¥ä¿æŒç¼©è¿›

### å­—ç¬¦ä¸²å ä½ç¬¦

æ¨¡æ¿å­—é¢é‡æ”¯æŒå ä½ç¬¦çš„ç‰¹æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ¨¡æ¿å­—é¢é‡ä¸­ï¼Œç•™ä¸‹ä¸€äº›å¯ä¾›æ›¿æ¢çš„åœ°æ–¹ï¼Œç„¶åä½¿ç”¨å˜é‡æˆ–è€…è¡¨è¾¾å¼å¯¹å­—é¢é‡è¿›è¡Œæ›¿æ¢

```javascript
let name = "å¼ ä¸‰";
let message = `ä½ å¥½ï¼Œ${name}`;
console.log(message);
```

å°†ä¼šè¾“å‡ºï¼š`ä½ å¥½ï¼Œå¼ ä¸‰`

è¿™ä¸ªåŠŸèƒ½å…¶å®ä¹Ÿæ˜¯å¾ˆå¤šè¯­è¨€éƒ½æœ‰çš„ä¸€ç§ç‰¹æ€§äº†ã€‚scala é‡Œä¹Ÿæœ‰è¿™ç§æ¨¡æ¿æ›¿æ¢çš„åŠŸèƒ½ã€‚

> æ³¨ï¼šæ¨¡æ¿å­—é¢é‡å¯ä»¥è®¿é—®ä½œç”¨åŸŸä¸­çš„æ‰€æœ‰å¯è®¿é—®çš„å˜é‡ï¼ŒåµŒå…¥æœªå®šä¹‰çš„å˜é‡å°†ä¼šæŠ›å‡ºé”™è¯¯

#### åµŒå…¥è¡¨è¾¾å¼

```javascript
let count = 10;
let price = 0.25;
let message = `${count} items cost $${(count * price).toFixed(2)}`;
console.log(message); // 10 items cost $2.50
```

> å ä½ç¬¦é‡Œå¯ä»¥åµŒå…¥ä»»ä½•åˆæ³•çš„ JavaScript è¡¨è¾¾å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨é‡Œé¢è¿›è¡Œå‡½æ•°è°ƒç”¨å’Œå…¶å®ƒçš„è®¡ç®—

#### åµŒå…¥æ¨¡æ¿å­—é¢é‡

ç”±äºå ä½ç¬¦å¯ä»¥åµŒå…¥åˆæ³•çš„è¡¨è¾¾å¼ï¼Œå› æ­¤æ¨¡æ¿å­—é¢é‡æœ¬èº«ä¹Ÿæ˜¯å¯ä»¥è¢«åµŒå…¥è¿›å»çš„

```javascript
let name = "å¼ ä¸‰";
let message = `ä½ å¥½ï¼Œ${
    `æˆ‘çš„åå­—æ˜¯${name}`
}`;
console.log(message); // ä½ å¥½ï¼Œæˆ‘çš„åå­—æ˜¯å¼ ä¸‰
```

å¾ˆæ˜æ˜¾ï¼šå…ˆè®¡ç®—é‡Œé¢çš„è¡¨è¾¾å¼ï¼Œå†è®¡ç®—å¤–é¢çš„è¡¨è¾¾å¼

### æ ‡ç­¾æ¨¡æ¿

æ ‡ç­¾æ¨¡æ¿å°±æ˜¯åŠ å¼ºç‰ˆæœ¬çš„æ¨¡æ¿å ä½ç¬¦

æˆ–è€…å¯ä»¥è¿™ä¹ˆè¯´ï¼Œæ¨¡æ¿å­—é¢é‡å…¶å®å°±æ˜¯é€šè¿‡æ ‡ç­¾æ¨¡æ¿æ¥å®Œæˆçš„ï¼Œä¸‹é¢çœ‹ä¾‹å­

```javascript
let age = 22;
let name = 'czp'
var tag = function (arr, age, name) {
    console.log(arr);
    console.log(age);
    console.log(name);
    return 'hehehe';
}
var message = tag`my age is ${age}, my name is ${name}`;
console.log(message);
```

å°†ä¼šè¾“å‡º

```javascript
(py3.5) czp@:~/workspace/knowledge-base/demos/node_start$ node hello.js
[ 'my age is ', ', my name is ', '' ]
22
czp
hehehe
```

åˆ†æï¼š

```javascript
var message = tag`my age is ${age}, my name is ${name}`;
```

è¿™ä¸€è¡Œè·Ÿä¹‹å‰çš„æ¨¡æ¿å­—é¢é‡çš„åŒºåˆ«å°±æ˜¯å‰é¢åŠ äº†ä¸€ä¸ªæ ‡ç­¾ï¼štag

å®é™…ä¸Šè¿™ä¸ªæ ‡ç­¾å°±æ˜¯æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ä¸€ä¸ªå‡½æ•°çš„åç§°ï¼ˆåç§°å¯ä»¥è‡ªå·±éšä¾¿å®šä¹‰ï¼‰

è¿™ä¸€è¡Œçš„å®é™…æ„ä¹‰æ˜¯ï¼š

- å°†æ¨¡æ¿å­—é¢é‡è¿›è¡Œåˆ†å‰²ï¼Œä¾‹å¦‚ `my age is ${age}, my name is ${name}` å°†ä¼šåˆ†å‰²æˆï¼š

  - "my age is "
  - ", my name is "
  - ""

  è¿™ä¸ªåˆ†å‰²æ˜¯æŒ‰ç…§é‡Œé¢çš„åµŒå…¥æ¨¡æ¿è¿›è¡Œåˆ†å‰²ï¼Œä»»ä½•ä¸€ä¸ªç±»ä¼¼äº `${name}` è¿™æ ·çš„æ¨¡æ¿éƒ½ä¼šå°†å­—ç¬¦ä¸²åˆ†å‰²æˆå·¦è¾¹å’Œå³è¾¹ä¸¤éƒ¨åˆ†ï¼ˆå³è¾¹æ²¡æœ‰å­—ç¬¦çš„æ—¶å€™å°±ä¼šæ˜¯ä¸€ä¸ª "" ç©ºå­—ç¬¦ä¸²ï¼‰

- å°†åˆ†å‰²åçš„å­—ç¬¦ä¸²æ•°ç»„ `["my age is " , ", my name is " , ""]` ä½œä¸º `tag` å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°

- ç¬¬äºŒä¸ªå‚æ•°æ˜¯ `${age}` çš„å€¼ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ `${name}` çš„å€¼ï¼Œæ€»è€Œè¨€ä¹‹åç»­å‚æ•°æ˜¯æ¨¡æ¿æŒ‰ç…§é¡ºåºè§£æçš„å€¼

- `tag` å‡½æ•°çš„è¿”å›å€¼å°†ä¼šæ˜¯è¿™ä¸ªæ¨¡æ¿çš„å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´

  ```javascript
  tag`my age is ${age}, my name is ${name}`;
  ç­‰ä»·äº tag(["my age is " , ", my name is " , ""], age, name);
  ```

> æ˜¾ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨æ ‡ç­¾æ¨¡æ¿å®ç°å ä½ç¬¦çš„åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨å®ƒå®ç°ä¸€äº›æ›´é«˜çº§çš„åŠŸèƒ½ï¼Œæ€»ä¹‹ç®—æ˜¯ ES 6 æä¾›çš„ä¸€ç§æ¨¡æ¿ API å§



