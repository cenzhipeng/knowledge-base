---
id: 2.springbootè¯·æ±‚å‚æ•°ç»‘å®š
title: æœ¬æ–‡å†…å®¹
sidebar_label: 2.springbootè¯·æ±‚å‚æ•°ç»‘å®š
---

æœ¬æ–‡ä¸»è¦æ˜¯è®°å½•ä¸€ä¸‹ springboot ä¸­å¯¹äº HTTP è¯·æ±‚çš„å„ç§å‚æ•°ç»‘å®šçš„è¯¦æƒ…



## æŸ¥è¯¢å‚æ•°ç»‘å®š

```
http://localhost:8080/hello?str=sss&more=xxx
```

ç±»ä¼¼äºè¿™ç§é—®å·åé¢åŠ ä¸Šå‚æ•°åˆ—è¡¨çš„æ–¹å¼ï¼Œå¯ä»¥ä½¿ç”¨ DTO å¯¹è±¡çš„æ–¹å¼æ¥æ¥æ”¶æ•°æ®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å•ç‹¬çš„å‚æ•°æ¥æ¥æ”¶æ•°æ®ï¼Œcontroller å’Œ DTO å¯ä»¥è¿™æ ·å†™ï¼š

```java
@GetMapping("/hello")
public String hello(HelloDTO helloDTO, String more) {
  return "aaa" + helloDTO.getStr() + more;
}

@Data
public class HelloDTO {
    private String str;
    private Integer number;
    private List<String> strList;
    private List<Integer> numberList;
    private String[] strArr;
    private Integer[] numberArr;
    private HelloDTO innerDTO;
    private HelloDTO[] innerDTOArr;
    private List<HelloDTO> innerDTOList;
}

// è¿”å›  aaasssxxx
```

å¯ä»¥çœ‹åˆ°ï¼Œ str å‚æ•°è‡ªåŠ¨ç»‘å®šåˆ°äº† HelloDTOï¼Œmore å‚æ•°è‡ªåŠ¨ç»‘å®šåˆ°äº† controller ç¬¬äºŒä¸ª String å‚æ•° moreã€‚

### é‡åå‚æ•°

è¿˜æ˜¯ä»¥ä¸‹é¢è¯·æ±‚ä¸ºä¾‹ã€‚

```
http://localhost:8080/hello?str=sss&more=xxx
```

```java
@GetMapping("/hello")
public String hello(HelloDTO helloDTO, String str) {
  return "aaa" + helloDTO.getStr() + str;
}

@Data
public class HelloDTO {
    private String str;
    private Integer number;
    private List<String> strList;
    private List<Integer> numberList;
    private String[] strArr;
    private Integer[] numberArr;
    private HelloDTO innerDTO;
    private HelloDTO[] innerDTOArr;
    private List<HelloDTO> innerDTOList;
}

// è¿”å›  aaassssss
```

æ³¨æ„è¿™é‡Œï¼ŒHTTP æŸ¥è¯¢å‚æ•° str æ—¢è¢«ç»‘å®šåˆ°äº† DTO ä¹Ÿè¢«ç»‘å®šåˆ°äº†ç¬¬äºŒä¸ª controller æ–¹æ³•å‚æ•° strã€‚

> å¦‚æœæˆ‘ä»¬æŠŠç¬¬äºŒä¸ªå‚æ•° str æ”¹æˆ Integer ç±»å‹ï¼Œé‚£ä¹ˆç»‘å®š DTO çš„æ—¶å€™ä¸ä¼šå‡ºé”™ï¼Œç»‘å®šç¬¬äºŒä¸ª str çš„æ—¶å€™ä¼šå‡ºé”™ï¼Œå°±ä¼šå¯¼è‡´ç»‘å®šé”™è¯¯
>
> è¿™ç§è¡Œä¸ºå¯ä»¥ç†è§£æˆï¼šspringboot çš„å‚æ•°ç»‘å®šå™¨ï¼Œå°†æ‰€æœ‰çš„è¯·æ±‚å‚æ•°ï¼Œä¾æ¬¡å¯¹æ¯ä¸ªcontrolleræ–¹æ³•å‚æ•°è¿›è¡Œç»‘å®šï¼Œæ‰€ä»¥å¤„ç†åŒåå‚æ•°çš„æ—¶å€™ä¼šç»‘å®š2æ¬¡

æˆ‘ä»¬å¯ä»¥ä¿®æ”¹è¿™ç§è¡Œä¸º

```java
@GetMapping("/hello")
public String hello(HelloDTO helloDTO, String str) {
  return "aaa" + helloDTO.getStr() + str;
}

@InitBinder("helloDTO")
public void initHelloDTO(WebDataBinder binder){
  binder.setFieldDefaultPrefix("dto.");
}

@Data
public class HelloDTO {
    private String str;
    private Integer number;
    private List<String> strList;
    private List<Integer> numberList;
    private String[] strArr;
    private Integer[] numberArr;
    private HelloDTO innerDTO;
    private HelloDTO[] innerDTOArr;
    private List<HelloDTO> innerDTOList;
}
```

```
GET http://localhost:8080/hello?dto.str=sss&more=xxx
ç»“æœï¼šaaasssnull
```

åœ¨æœ¬ Controller ä¸­æ·»åŠ ä¸€ä¸ª `@InitBinder` æ³¨è§£çš„æ–¹æ³•ï¼Œæ³¨è§£çš„å‚æ•°è¡¨ç¤ºè¦ä¿®æ”¹ç»‘å®šçš„å‚æ•°çš„åç§°ï¼Œä¾‹å¦‚è¿™é‡Œæ˜¯ `helloDTO` ï¼Œä¸ controller æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•° `(HelloDTO helloDTO)` æ¯”å¯¹ä¸Šäº†ï¼Œè¿™ä¸ª binder æ–¹æ³•çš„ä½œç”¨å°±æ˜¯è¯´ï¼šç»™ helloDTO å‚æ•°**å¤šæ·»åŠ **ä¸€ç§ç»‘å®šæ–¹å¼ï¼Œè¿™ç§æ–¹å¼å°±æ˜¯ä½¿ç”¨å‰ç¼€ `dto.`

æ³¨æ„è¿™é‡Œæ˜¯å¤šæ·»åŠ ä¸€ç§ç»‘å®šæ–¹å¼ï¼Œä¹Ÿå°±æ˜¯è¯´ dto.str å’Œ str éƒ½å¯ä»¥ç»‘å®šåˆ° helloDTO çš„ str å‚æ•°ã€‚



å¦å¤–ï¼Œå¦‚æœè¿™ç§è¡Œä¸ºæ„Ÿåˆ°æ¯”è¾ƒè¿·æƒ‘çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ @ModelAttribute æ³¨è§£

```java
    @GetMapping("/hello")
    public String hello(@ModelAttribute("helloDTO") HelloDTO helloDTO,
                        @ModelAttribute("helloDTO2") HelloDTO another) {
        return "aaa" + helloDTO.getStr() + another.getStr();
    }

    @InitBinder("helloDTO")
    public void initHelloDTO(WebDataBinder binder) {
        binder.setFieldDefaultPrefix("dto.");
    }

    @InitBinder("helloDTO2")
    public void initHelloDTO2(WebDataBinder binder) {
        binder.setFieldDefaultPrefix("dto2.");
    }
```

è¿™æ ·ï¼Œdto2 å¼€å¤´çš„å°±ç»‘å®šåˆ°ç¬¬äºŒä¸ªå‚æ•°ä¸Šï¼Œdto å¼€å¤´çš„å°±ç»‘å®šåˆ°ç¬¬ä¸€ä¸ªå‚æ•°ä¸Š

```
GET http://localhost:8080/hello?dto.str=sss&dto2.str=xxx
ç»“æœï¼šaaasssxxx
```

> è¿™ç§å®é™…ä¸Šå°±æ˜¯ä¸ºå‚æ•°å•ç‹¬è®¾ç½®äº†ç»‘å®šçš„è¡Œä¸º

### å†…éƒ¨åµŒå¥—å¯¹è±¡å‚æ•°ç»‘å®š

HelloDTO å†…éƒ¨æœ‰ä¸€ä¸ªå¯¹è±¡å«åš innerDTOï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ª DTOï¼Œå¦‚æœæƒ³è¦ç»™è¿™ç§å†…éƒ¨åµŒå¥—çš„å¯¹è±¡èµ‹å€¼ï¼Œéœ€è¦ä½¿ç”¨å¦‚ä¸‹çš„æ–¹æ³•ï¼š

```java
@GetMapping("/hello")
public String hello(HelloDTO helloDTO) {
  return "aaa" + helloDTO.getStr() + helloDTO.getInnerDTO().getStr();
}

@Data
public class HelloDTO {
    private String str;
    private Integer number;
    private List<String> strList;
    private List<Integer> numberList;
    private String[] strArr;
    private Integer[] numberArr;
    private HelloDTO innerDTO;
    private HelloDTO[] innerDTOArr;
    private List<HelloDTO> innerDTOList;
}
```

```
GET http://localhost:8080/hello?str=sss&innerDTO.str=mmm
ç»“æœï¼šaaasssmmm
```

å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ä½¿ç”¨ innerDTO.str è¿™ç§åµŒå¥—æ–¹å¼ï¼Œç»‘å®šåˆ°äº†å†…éƒ¨ innerDTO å¯¹è±¡çš„ str å±æ€§

### Listå‚æ•°ç»‘å®š

```java
@GetMapping("/hello")
public Object hello(HelloDTO helloDTO) {
  return helloDTO.getStrList();
}

@Data
public class HelloDTO {
    private String str;
    private Integer number;
    private List<String> strList;
    private List<Integer> numberList;
    private String[] strArr;
    private Integer[] numberArr;
    private HelloDTO innerDTO;
    private HelloDTO[] innerDTOArr;
    private List<HelloDTO> innerDTOList;
}
```

```
GET http://localhost:8080/hello?strList=x&strList=y&strList=z
ç»“æœï¼š["x","y","z"]
```

å¦‚æœè¦ç»‘å®šå†…éƒ¨çš„ List

```java
@GetMapping("/hello")
public Object hello(HelloDTO helloDTO) {
  return helloDTO.getInnerDTO().getStrList();
}

@Data
public class HelloDTO {
    private String str;
    private Integer number;
    private List<String> strList;
    private List<Integer> numberList;
    private String[] strArr;
    private Integer[] numberArr;
    private HelloDTO innerDTO;
    private HelloDTO[] innerDTOArr;
    private List<HelloDTO> innerDTOList;
}
```

```
GET http://localhost:8080/hello?innerDTO.strList=x&innerDTO.strList=y&innerDTO.strList=z
ç»“æœï¼š["x","y","z"]
```

å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨ `argNum=arg1& argNum=arg2& argNum=arg3 ` è¿™ç§å½¢å¼å°±å¯ä»¥ç»‘å®š List

### Set å‚æ•°ç»‘å®š

```java
@GetMapping("/hello")
public Object hello(HelloDTO helloDTO) {
  return helloDTO.getStrSet();
}

@Data
public class HelloDTO {
    private String str;
    private Integer number;
    private List<String> strList;
    private Set<String> strSet;
    private List<Integer> numberList;
    private String[] strArr;
    private Integer[] numberArr;
    private HelloDTO innerDTO;
    private HelloDTO[] innerDTOArr;
    private List<HelloDTO> innerDTOList;
}
```

```
GET http://localhost:8080/hello?strSet=x&strSet=y&strSet=z&strSet=z
ç»“æœï¼š["x","y","z"]
```

å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨ `argNum=arg1& argNum=arg2& argNum=arg3 ` è¿™ç§å½¢å¼ä¹Ÿå¯ä»¥ç»‘å®š Setï¼Œä¼šè‡ªåŠ¨å»é‡

### æ•°ç»„å‚æ•°ç»‘å®š

```java
@GetMapping("/hello")
public Object hello(HelloDTO helloDTO) {
  return helloDTO.getStrArr();
}

@Data
public class HelloDTO {
    private String str;
    private Integer number;
    private List<String> strList;
    private Set<String> strSet;
    private Map<String,String> strMap;
    private List<Integer> numberList;
    private String[] strArr;
    private Integer[] numberArr;
    private HelloDTO innerDTO;
    private HelloDTO[] innerDTOArr;
    private List<HelloDTO> innerDTOList;
}
```

```
GET http://localhost:8080/hello?strArr=1&strArr=x&strArr=k
ç»“æœï¼š["1","x","k"]
```

### Mapå‚æ•°ç»‘å®š

æ²¡ç ”ç©¶æ˜ç™½æ€ä¹ˆæŠŠæŸ¥è¯¢å‚æ•°ç»‘å®šåˆ°DTOå†…éƒ¨çš„mapğŸ¤£ï¼Œå¦‚æœåªæ˜¯ç»‘å®šå¤–éƒ¨çš„ mapï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼

```java
@GetMapping("/hello")
public Object hello(@RequestParam Map<String, String> map) {
  return map;
}
```

> æ³¨æ„å¿…é¡»è¦æ·»åŠ  @RequestParam æ³¨è§£
>
> å¦åˆ™è¿™ä¸ª map å°±æ˜¯è¢«æ³¨å…¥è¿›æ¥çš„ ModelMap äº†ã€‚
>
> ï¼ˆè¯´å®è¯è¿™ä¸ªæŠ€æœ¯æˆ‘åŸºæœ¬ä¸æ€ä¹ˆç”¨ï¼Œæ„Ÿè§‰ä¹Ÿæ²¡å¤šå°‘äººç”¨è¿™ä¸ªç‰¹æ€§äº†ï¼‰

```
GET http://localhost:8080/hello?a=1&b=4
ç»“æœï¼š{"a":"1","b":"4"}
```

### RequestParam æ³¨è§£

```java
@GetMapping("/hello")
public Object hello(@RequestParam String xx) {
  return xx;
}
```

```
GET http://localhost:8080/hello?xx=s
ç»“æœï¼šs
GET http://localhost:8080/hello
ç»“æœï¼šæŠ¥é”™
```

```java
@GetMapping("/hello")
public Object hello(@RequestParam(value = "aa", required = false) String xx) {
  return xx;
}
```

```
GET http://localhost:8080/hello?xx=s
ç»“æœï¼šæ— 
GET http://localhost:8080/hello?aa=s
ç»“æœï¼šs
```

> RequestParam ä¸»è¦æ˜¯å®šä¹‰å‚æ•°åç§°å’Œæ˜¯å¦å¿…é¡»
>
> å½“æˆ‘ä»¬ä¸å†™ RequestParam æ—¶ï¼Œå•ç‹¬çš„å‚æ•°ç›¸å½“äºæ˜¯ `@RequestParam(value = å‚æ•°å, required = false) String å‚æ•°å`ï¼Œé»˜è®¤ä½¿ç”¨å‚æ•°çš„å½¢å‚åç§°
>
> è¿™é‡Œåªç”¨äºå•ä½“å‚æ•°ï¼Œç”¨äº DTO è¿™ç§å®ä½“å‚æ•°çš„è¯æœ‰é—®é¢˜ï¼Œå®ƒä¼šå•ç‹¬å–è¿™ä¸€ä¸ªå‚æ•°è½¬æ¢æˆå®ä½“DTOç±»å‹ï¼Œä¼šè½¬æ¢å¼‚å¸¸



### æ€»ç»“

- Listã€Setã€æ•°ç»„çš„ç»‘å®šæ–¹å¼æ˜¯ä¸€æ ·çš„ï¼ŒæŸ¥è¯¢å‚æ•°éƒ½æ˜¯ `argNum=arg1& argNum=arg2& argNum=arg3 ` çš„å½¢å¼
- é‡åå‚æ•°é»˜è®¤ä¼šç»‘å®šåˆ°æ‰€æœ‰é‡åçš„åœ°æ–¹
- å¦‚æœæƒ³é¿å…é‡åå‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨ @InitBinder æ³¨è§£ï¼Œæ¥æ·»åŠ å‚æ•°å‰ç¼€
- åµŒå¥—å†…éƒ¨å¯¹è±¡å‚æ•°çš„ç»‘å®šæ–¹å¼æ˜¯ä½¿ç”¨å‚æ•°å‰ç¼€
- å•ä½“å‚æ•°çœç•¥äº† RequestParam æ³¨è§£ï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯å‚æ•°åè¿›è¡Œç»‘å®š



## è¯·æ±‚è·¯å¾„PATHå‚æ•°

è¯·æ±‚è·¯å¾„PATHå‚æ•°è¡¨ç¤ºURLé‡Œçš„å‚æ•°ï¼Œåœ¨springbootä¸­ä½¿ç”¨ pathVariable è¿›è¡Œç»‘å®šã€‚

```java
@GetMapping("/hello/{path}")
public Object hello(@PathVariable String path) {
  return path;
}
```

```
GET http://localhost:8080/hello/path1
ç»“æœï¼špath1
GET http://localhost:8080/hello/
ç»“æœï¼šé”™è¯¯
```

PathVariable æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯ç»‘å®šåç§°ä¸€ä¸ªæ˜¯æ˜¯å¦å¿…é¡»æœ‰

```java
@GetMapping("/hello/{path}")
public Object hello(@PathVariable(name = "path") String path) {
  return path;
}
```

è¿™ä¸ªè·Ÿä¸Šé¢çš„å®šä¹‰æ˜¯ä¸€æ ·çš„ï¼Œ`@PathVariable(name = "path")` è¡¨ç¤ºç»‘å®šåˆ° `@GetMapping("/hello/{path}")` çš„ path å˜é‡ã€‚

å¦å¤–è¿˜æœ‰ä¸€ä¸ª required å‚æ•°è¡¨ç¤ºè¿™ä¸ªå‚æ•°æ˜¯å¦æ˜¯å¿…é¡»çš„

æ€»ä½“æ¥è¯´è¿™ä¸ªå‚æ•°çš„ä½¿ç”¨æ¯”è¾ƒç®€å•



## è¯·æ±‚HEADERå‚æ•°

```java
@GetMapping("/hello")
public Object hello(@RequestHeader("My-Header")  String header) {
  return header + header;
}
```

```
GET localhost:8080/hello
My-Header: xxx
ç»“æœï¼šxxxxxx
```

ä½¿ç”¨ `@RequestHeader` æ³¨è§£æ¥è·å– Header å‚æ•°

ä¹Ÿå¯ä»¥ä¸€æ¬¡æ€§æ¥æ”¶æ‰€æœ‰çš„ Header

```java
@GetMapping("/hello")
public Object hello(@RequestHeader Map<String, String> header) {
  return header;
}
```

```
GET localhost:8080/hello
My-Header: xxx
cookie: abc=jkl
ç»“æœï¼š
{
  "my-header": "xxx",
  "cookie": "abc=jkl",
  "host": "localhost:8080",
  "connection": "Keep-Alive",
  "user-agent": "Apache-HttpClient/4.5.10 (Java/11.0.5)",
  "accept-encoding": "gzip,deflate"
}
```

> è¿™é‡Œå¤šä½™çš„å¤´éƒ¨æ˜¯æˆ‘ä½¿ç”¨çš„HTTPå®¢æˆ·ç«¯è‡ªåŠ¨è¡¥å……çš„
>
> é™¤äº† `@RequestHeader Map<String, String> header` ä¹Ÿå¯ä»¥ä½¿ç”¨ HttpHeaders æ¥æ¥æ”¶æ‰€æœ‰å¤´éƒ¨

### è·å–Cookie

```java
@GetMapping("/hello")
public Object hello(@RequestHeader("My-Header") String header, @CookieValue("abc") String cookie) {
  return header + cookie;
}
```

```
GET localhost:8080/hello
My-Header: xxx
cookie: abc=jkl
```

ä½¿ç”¨ @CookieValue("abc") è·å–åˆ° cookie ä¸­å…³äº abc çš„å€¼



## application/json ç±»å‹çš„ body å‚æ•°

### jsonç»‘å®šåˆ°DTO

```java
@PostMapping("/hello")
public Object hello(@RequestBody HelloDTO helloDTO) {
  return helloDTO.getStr();
}
```

```
POST localhost:8080/hello
Content-Type: application/json

{
  "str": "sttttt"
}

ç»“æœï¼š
sttttt
```

> ä½¿ç”¨ @RequestBody ç»‘å®šbodyå‚æ•°åˆ° DTO ä¸Š

### json å†…éƒ¨åµŒå¥—å¯¹è±¡

```java
@PostMapping("/hello")
public Object hello(@RequestBody HelloDTO helloDTO) {
  return helloDTO.getStr() + helloDTO.getInnerDTO().getStr();
}
```

```
POST localhost:8080/hello
Content-Type: application/json

{
  "str": "sttttt",
  "innerDTO": {
    "str": "mmmm"
  }
}

ç»“æœï¼š
stttttmmmm
```

> ä½¿ç”¨ json çš„åµŒå¥—æ ¼å¼å³å¯ï¼Œä¸éœ€è¦ä½¿ç”¨ å‰ç¼€å.xxx æ¥å®šä¹‰åµŒå¥—å¯¹è±¡

### json æ˜ å°„ä¸º Listã€æ•°ç»„ã€Setã€Map

```java
@PostMapping("/hello")
public Object hello(@RequestBody HelloDTO helloDTO) {
  return helloDTO;
}

@Data
public class HelloDTO {
    @JsonIgnore
    private String str;
    @JsonIgnore
    private Integer number;

    private List<String> strList;
    private Set<String> strSet;
    private Map<String, String> strMap;
    private String[] strArr;
    @JsonIgnore
    private HelloDTO innerDTO;
    @JsonIgnore
    private HelloDTO[] innerDTOArr;
    @JsonIgnore
    private List<HelloDTO> innerDTOList;
}
```

```
POST localhost:8080/hello
Content-Type: application/json

{
  "strList": ["x","y","z","z"],
  "strSet": ["x","y","z","z"],
  "strMap": {
    "a": "aa",
    "b": "bbb"
  },
  "strArr": ["x","y","z","z"]
}

ç»“æœï¼š
{"strList":["x","y","z","z"],"strSet":["x","y","z"],"strMap":{"a":"aa","b":"bbb"},"strArr":["x","y","z","z"]}
```

> å¯ä»¥çœ‹åˆ°ï¼Œå¾ˆç¬¦åˆç›´è§‰

### æ€»ç»“

- json åªèƒ½è¢«è¯»å–ä¸€æ¬¡ï¼Œå¦‚æœæƒ³ç»‘å®šåˆ°ä¸¤ä¸ªå®ä½“ï¼Œæ˜¯ä¸å¯ä»¥çš„
- json ç›´æ¥æ˜ å°„æˆ DTO æ˜¯å¾ˆæ–¹ä¾¿çš„ï¼Œä½†æ˜¯ä¸èƒ½æ˜ å°„æˆå•ä½“å‚æ•°ï¼Œä¾‹å¦‚å•ç‹¬çš„ Integer
- å¯ä»¥ä¿®æ”¹ mvcConfig æ¥è°ƒæ•´æ˜ å°„çš„è¡Œä¸ºï¼Œé‡å†™ configureMessageConverters() æ–¹æ³•æ¥æ›¿ä»£é»˜è®¤çš„è½¬æ¢å™¨ï¼Œæˆ–è€… é‡å†™ extendMessageConverters() æ–¹æ³•æ¥è‡ªå®šä¹‰é»˜è®¤çš„è½¬æ¢å™¨ï¼Œæˆ–è€…æ·»åŠ æ–°çš„è½¬æ¢å™¨



## multipart/form-data ç±»å‹çš„ body å‚æ•°

```java
@PostMapping("/multi")
public Object multi(HelloDTO helloDTO){
  return helloDTO.getStr() + helloDTO.getInnerDTO().getStr();
}
```

```
POST http://localhost:8080/multi
Content-Type: multipart/form-data; boundary=WebAppBoundary

--WebAppBoundary
Content-Disposition: form-data; name="str"

sss
--WebAppBoundary--
Content-Disposition: form-data; name="innerDTO.str"

xxx
--WebAppBoundary--
```

ä»¥ä¸Šçš„ HTTP è¯·æ±‚ï¼Œå°±æ˜¯ä½¿ç”¨ POST è¯·æ±‚ï¼Œå‚æ•°ç±»å‹æ˜¯ multipart/form-dataï¼Œå‚æ•°åˆ†åˆ«æ˜¯ str=sss å’Œ innerDTO.str = xxx

æœ€åçš„ç»“æœæ˜¯ï¼šsssxxx

> å¯ä»¥çœ‹å‡ºï¼Œè¿™ç§ç±»å‹çš„æ•°æ®ç»‘å®šç‰¹ç‚¹å’ŒæŸ¥è¯¢å‚æ•°å¾ˆç›¸ä¼¼ï¼Œä¼ é€’å†…éƒ¨åµŒå¥—å‚æ•°ã€Listã€Setã€æ•°ç»„çš„æ–¹å¼ä¸æŸ¥è¯¢å‚æ•°æ˜¯ä¸€è‡´çš„

### æ¥æ”¶æ–‡ä»¶

ä»¥ä¸Šæ˜¯ç®€å•çš„ç±»ä¼¼äºä½¿ç”¨æŸ¥è¯¢å‚æ•°çš„æ–¹å¼ï¼Œå®é™…ä¸Š multipart/form-data è¿˜å¯ä»¥ä¼ é€’æ›´å¤æ‚çš„å‚æ•°ï¼Œä¾‹å¦‚æ–‡ä»¶ã€JSON ç­‰ã€‚

```java
@PostMapping("/file")
public Object file(MultipartFile file1, String arg1) throws IOException {
  return new String(file1.getBytes()) + arg1;
}
```

```
POST http://localhost:8080/file
Content-Type: multipart/form-data; boundary=WebAppBoundary

--WebAppBoundary
Content-Disposition: form-data; name="arg1"
Content-Type: text/plain

value1
--WebAppBoundary
Content-Disposition: form-data; name="file1"; filename="data.json"
Content-Type: text/plain

< ./../../pom.xml
--WebAppBoundary--
```

è¿™é‡Œçš„ HTTP è¯·æ±‚ï¼Œä½¿ç”¨ multipart/form-data ä¼ é€’äº†ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯æ–‡æœ¬å’Œæ–‡ä»¶ã€‚æ–‡ä»¶æ˜¯å½“å‰çš„ pom.xml ï¼Œè¿™é‡Œçš„è·¯å¾„æ˜¯ idea é‡Œå®šä¹‰çš„ç›¸å¯¹è·¯å¾„ï¼Œæ€»ä¹‹æœ€åä¼šç¡®å®šåˆ°ä¸€ä¸ªæ–‡ä»¶ã€‚æ–‡æœ¬çš„å€¼æ˜¯ value1ã€‚

ç»“æœæ˜¯ï¼š

```
..... çœç•¥
    </build>

</project>
value1
```

å¯ä»¥çœ‹åˆ°æˆåŠŸæ¥æ”¶äº†è¿™ä¸¤ä¸ªå‚æ•°ã€‚

è¿™ç§ç”¨æ³•åŸºæœ¬ä¸æŸ¥è¯¢å‚æ•°ç»‘å®šåˆ°å•ä½“å‚æ•°æ˜¯ä¸€è‡´çš„ã€‚

### RequestPart ç»‘å®šå¤šä¸ªå¤æ‚ JSON

```java
@PostMapping("/twoJson")
public Object twoJson(@RequestPart("h1") HelloDTO helloDTO, @RequestPart("h2") HelloDTO helloDTO2) {
  return new HelloDTO[]{helloDTO, helloDTO2};
}
```

```
POST http://localhost:8080/twoJson
Content-Type: multipart/form-data; boundary=WebAppBoundary

--WebAppBoundary
Content-Disposition: form-data; name="h1"
Content-Type: application/json

{
  "strList": ["x1","y1","z1","z1"],
  "strSet": ["x1","y1","z1","z1"],
  "strMap": {
    "a": "aa1",
    "b": "bbb1"
  },
  "strArr": ["x1","y1","z1","z1"]
}
--WebAppBoundary--
Content-Disposition: form-data; name="h2"
Content-Type: application/json

{
  "strList": ["x2","y2","z2","z2"],
  "strSet": ["x2","y2","z2","z2"],
  "strMap": {
    "a": "aa2",
    "b": "bbb2"
  },
  "strArr": ["x2","y2","z2","z2"]
}
--WebAppBoundary--
```

ç»“æœæ˜¯ï¼š

```
[
  {
    "strList": [
      "x1",
      "y1",
      "z1",
      "z1"
    ],
    "strSet": [
      "z1",
      "y1",
      "x1"
    ],
    "strMap": {
      "a": "aa1",
      "b": "bbb1"
    },
    "strArr": [
      "x1",
      "y1",
      "z1",
      "z1"
    ]
  },
  {
    "strList": [
      "x2",
      "y2",
      "z2",
      "z2"
    ],
    "strSet": [
      "z2",
      "y2",
      "x2"
    ],
    "strMap": {
      "a": "aa2",
      "b": "bbb2"
    },
    "strArr": [
      "x2",
      "y2",
      "z2",
      "z2"
    ]
  }
]
```

å¯ä»¥çœ‹åˆ°ï¼ŒRequestPart ä½¿ç”¨ multipart/form-data æŠŠæ¯ä¸ª part å½“æˆä¸€ä¸ª json æ¥è§£æäº†ã€‚

### æ€»ç»“

- RequestPart æ‰€ä»£è¡¨çš„ multipart/form-data å‚æ•°é‡Œæ¯ä¸ª part å¾ˆåƒæ˜¯æŸ¥è¯¢å‚æ•°çš„ç”¨æ³•
- æ¯ä¸ª part å¯ä»¥ä»£è¡¨æ›´å¤æ‚çš„æ•°æ®åŒ…æ‹¬æ–‡ä»¶ã€json ç­‰ï¼Œä½¿ç”¨ json çš„æ—¶å€™ä¸€ä¸ª part å°±ç±»ä¼¼äº application/json ç±»å‹çš„æ•´ä¸ª body å‚æ•°
- è¿™ç§æ–¹å¼å¯ä»¥é€‚ç”¨äºå‚æ•°ååˆ†å¤æ‚çš„æƒ…å†µï¼Œæ–‡ä»¶ã€jsonã€å•ä¸ªå‚æ•°éƒ½å¯ä»¥ç”¨è¿™ç§æ–¹å¼æ¥ä¼ é€’æ•°æ®ã€‚



## application/x-www-form-urlencoded ç±»å‹çš„ body å‚æ•°

è¿™ç§å‚æ•°ç±»ä¼¼äºæŸ¥è¯¢å‚æ•°çš„æ ¼å¼

```java
@PostMapping("/urlencoded")
public Object urlencoded(HelloDTO helloDTO) {
  return helloDTO.getStr() + helloDTO.getInnerDTO().getStr();
}
```

```
POST http://localhost:8080/urlencoded
Content-Type: application/x-www-form-urlencoded

str=xxx&innerDTO.str=mmm

ç»“æœï¼š
xxxmmm
```

å¯ä»¥çœ‹åˆ°ï¼Œè¿™ç§å½¢å¼çš„å‚æ•°ï¼Œå…¶å®å°±æ˜¯å°† URL é‡Œçš„æŸ¥è¯¢å‚æ•°æ”¾åˆ°äº† POST è¯·æ±‚çš„ BODY é‡Œé¢ã€‚

springboot å¯¹è¿™ç§å‚æ•°çš„è§£æï¼Œä¸æŸ¥è¯¢å‚æ•°æ˜¯å®Œå…¨ä¸€è‡´çš„ï¼Œç”šè‡³ä¼šå’Œå®ƒæ··åˆèµ·æ¥ã€‚

```
POST http://localhost:8080/urlencoded?innerDTO.str=mmm
Content-Type: application/x-www-form-urlencoded

str=aaa
ç»“æœï¼š
aaammm
```

è¿™é‡Œå°±çœ‹å‡ºæ¥ï¼ŒSpringboot é»˜è®¤çš„å‚æ•°ç»‘å®šè¡Œä¸ºæ˜¯å°†ä¸¤è€…ç›´æ¥æ··åˆäº†ï¼Œæˆ‘ä»¬ä½¿ç”¨ RequestParam æ³¨è§£çš„æ•ˆæœä¹Ÿä¸æŸ¥è¯¢å‚æ•°æ˜¯å®Œå…¨ä¸€è‡´çš„ï¼Œè¿™é‡Œå°±ä¸å†é‡å¤äº†ã€‚



## body å‚æ•°æ€»ç»“

- å¸¸ç”¨çš„ä¸‰ç§æ˜¯ï¼šapplication/jsonã€multipart/form-dataã€application/x-www-form-urlencoded
- application/json åªèƒ½å°†æ•´ä¸ª body å½“æˆ json ç»‘å®šä¸€æ¬¡ï¼Œæ— æ³•ç»‘å®šå¤šä¸ªå‚æ•°
- application/x-www-form-urlencoded åŸºæœ¬ç­‰åŒäºæŸ¥è¯¢å‚æ•°ï¼Œåªæ˜¯æŠŠå®ƒä»URLé‡ŒæŒªåˆ°äº†bodyé‡Œ
- multipart/form-data æœ€çµæ´»
  - ç®€å•ä½¿ç”¨æ—¶ç±»ä¼¼äºæŸ¥è¯¢å‚æ•°çš„é”®å€¼å¯¹
  - å¤æ‚ä½¿ç”¨æ—¶ï¼Œæ¯ä¸ª part éƒ¨åˆ†éƒ½å¯ä»¥æ˜¯å¤æ‚å‚æ•°ï¼Œå¸¸ç”¨çš„å¯ä»¥æ˜¯æ–‡ä»¶ã€json ç­‰
- é‡åˆ°å¤æ‚å‚æ•°ç›´æ¥ä½¿ç”¨ multipart/form-data æ˜¯æœ€å®¹æ˜“æ»¡è¶³éœ€æ±‚çš„ï¼Œä¸€èˆ¬æ–‡ä»¶ä¸Šä¼ æ¥å£å°±ç”¨è¿™ä¸ª











